<!doctype html>
<html data-n-head-ssr data-n-head="">
  <head data-n-head="">
    <title data-n-head="true">如何使用Nuxt建立个人博客 | Jenny的小站</title><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="true" data-hid="description" name="description" content="Node解析Markdown，建立API返回JSON，Nuxt+Axios获取文章内容并生成静态页面"><link data-n-head="true" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gugi"><link data-n-head="true" rel="stylesheet" href="/styles.css"><link data-n-head="true" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css"><base href="/"><link rel="preload" href="/_nuxt/17a84bd3572ee423465a.js" as="script"><link rel="preload" href="/_nuxt/600f0d241938d783ce63.js" as="script"><link rel="preload" href="/_nuxt/c2ff236b0b488272402b.js" as="script"><link rel="preload" href="/_nuxt/d3c9905b0f23efd1d1af.js" as="script"><style data-vue-ssr-id="17cfdfa9:0 882e6430:0 498b36b5:0 6f6f973d:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#3b8070;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}nav[data-v-e5bce602]{position:fixed;top:0;left:0;right:0;bottom:0;height:40px;background:inherit;box-shadow:0 0 1px 0 rgba(0,0,0,.6);z-index:9999}.nav-wrap[data-v-e5bce602]{margin:0 auto;width:800px;display:flex;justify-content:space-between}header[data-v-e5bce602]{font-family:Gugi,cursive;margin:0 0 0 10px;height:100%;z-index:2}.nav-ul[data-v-e5bce602],header h2[data-v-e5bce602]{margin:0;height:100%}header a[data-v-e5bce602]{text-decoration:none}header a[data-v-e5bce602]:active,header a[data-v-e5bce602]:visited{color:inherit}.font-impact[data-v-e5bce602]{font-family:Impact}.nav-ul[data-v-e5bce602]{list-style:none;text-align:right;display:flex;justify-content:center;z-index:1}.nav-link[data-v-e5bce602]{margin-right:20px;height:100%;text-decoration:none}.nav-link[data-v-e5bce602]:last{margin-right:10px}.nav-link[data-v-e5bce602]:active{color:inherit}.nav-link li[data-v-e5bce602],header h2[data-v-e5bce602]{color:#000;height:100%;line-height:40px}.nav-link li[data-v-e5bce602]:hover{color:grey}.nav-link[data-v-e5bce602]:visited{color:inherit}.nuxt-link-active[data-v-e5bce602]{border-bottom:1px solid #000}.nav-mask[data-v-e5bce602]{height:40px;background:inherit;z-index:0}.body-mask[data-v-e5bce602],.nav-mask[data-v-e5bce602]{position:fixed;width:100%}.body-mask[data-v-e5bce602]{height:0;transition:height .8s;background:rgba(0,0,0,.5)}.body-mask-visible[data-v-e5bce602]{height:100%}.nav-btn[data-v-e5bce602]{width:40px;height:40px;display:none;z-index:2}.bar[data-v-e5bce602]{width:70%;height:25%;text-align:center;border-bottom:2px solid #000}.bar[data-v-e5bce602]:last-child{border:none}@media (max-width:425px){.nav-mask[data-v-e5bce602]{z-index:1}.nav-ul[data-v-e5bce602]{position:fixed;margin-top:40px;padding:0;width:100%;height:auto;-webkit-transform:translateY(-100%);transform:translateY(-100%);text-align:left;background:#fff;transition:-webkit-transform .8s;transition:transform .8s;transition:transform .8s,-webkit-transform .8s;display:block;overflow:hidden;z-index:0}.nav-mobile[data-v-e5bce602]{-webkit-transform:translateY(0);transform:translateY(0)}.nav-link[data-v-e5bce602]{height:auto}.nav-link li[data-v-e5bce602]{margin:0 10px;width:auto;height:auto;line-height:20px;border-bottom:1px solid #000}.nav-btn[data-v-e5bce602],.nav-link li[data-v-e5bce602]{display:block}}.blog-desc{margin:10px;padding:10px;color:#666;background-color:rgba(0,0,0,.025)}footer[data-v-759117da]{border-top:1px solid rgba(0,0,0,.6)}p[data-v-759117da]{margin:20px auto;font-size:14px;text-align:center}</style>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="container"><nav data-v-e5bce602><div class="nav-wrap" data-v-e5bce602><header data-v-e5bce602><a href="/" class="no-decor" data-v-e5bce602><h2 data-v-e5bce602>Jenny's blog</h2></a></header> <div class="nav-btn" data-v-e5bce602><div class="bar" data-v-e5bce602></div> <div class="bar" data-v-e5bce602></div> <div class="bar" data-v-e5bce602></div> <div class="bar" data-v-e5bce602></div></div> <div class="nav-mask" data-v-e5bce602></div> <div class="body-mask" data-v-e5bce602></div> <ul class="nav-ul" data-v-e5bce602><a href="/about" class="nav-link" data-v-e5bce602><li data-v-e5bce602>About</li></a><a href="/blogs" class="nav-link" data-v-e5bce602><li data-v-e5bce602>Blogs</li></a></ul></div></nav> <main><div><h1>如何使用Nuxt建立个人博客</h1> <p class="blog-date">2019-05-05</p> <p class="blog-date">
    Tags: 
    <span class="blog-tag"><a href="/blogs/tag/涨知识">涨知识</a></span><span class="blog-tag"><a href="/blogs/tag/Nuxt">Nuxt</a></span></p> <div class="blog-desc">Node解析Markdown，建立API返回JSON，Nuxt+Axios获取文章内容并生成静态页面</div> <div class="markdown-body"><h2 id="项目结构">项目结构</h2>
<pre><code>myblog
├─ .nuxt
├─ api    //☆手动建立这个文件夹☆
│   ├─ blogs    //需要api解析的Markdown文件夹
│   │   ├─ 2019-05-05-set-up-static-blog-using-nuxt.md
│   │   ├─ 2017-05-28-hao123-issue.md
│   │   └─ ...
│   └─ index.js //api的入口，一个 node index.js 就跑起来了
│               //默认路径http://127.0.0.1:4000
├─ components
│   ├─ Carousel.vue
│   ├─ Footer.vue
│   └─ Navigation.vue
├─ dist        //☆最后生成的静态文件都在这里☆
├─ layouts
│   ├─ default.vue //Navigation + Nuxt(主要内容) + Footer
│   └─ error.vue //虽然按要求弄了error页面，可是找不到页面时还是
│                //跳去服务器(github)的404页，求大神指点
├─ pages
│   ├─ blogs
│   │   ├─ tag
│   │   │   ├─ _tag.vue  //动态渲染标签下的文章列表
│   │   │   │            // => /blogs/tag/aaa.html
│   │   │   └─ index.vue //文章标签页 => /blogs/tag.html
│   │   ├─ _slug.vue //动态渲染文章页面 
│   │   │            // => /blogs/2019~~.html
│   │   └─ index.vue //文章列表页 => /blogs.html
│   ├─ about.vue
│   └─ index.vue     //网站入口 => /index.html
├─ static
│   ├─ img
│   │   └─ home  //首页用图 
│   │       ├─ pic1.jpg // => /img/home/bird1.jpg
│   │       └─ pic2.jpg // => /img/home/bird2.jpg
│   ├─ favicon.ico  //网站图标 => /favicon.ico
│   └─ styles.css   //公用css => /styles.css
│
├─ myConfig.js //一些自定义设置，用export default导出
│              //可以导入到vue文件中使用
│
├─ nuxt.config.js //nuxt网站整体设置，用module.exports导出
│                 //☆网站baseURL等设置全都在这里☆
│                 //无法被导入到vue文件中使用
├─ ...   //其他文件没动过</code></pre><h2 id="搭建网站的过程">搭建网站的过程</h2>
<ol>
<li><p>在/api/文件夹内打开一个终端，用 node index.js 启动api，解析/api/blogs/文件夹内的Markdown文件，返回一个JSON，这个api在开发调试和生成静态页面过程中都需要保持开启状态。<br>这个api可以：    </p>
<ol>
<li>请求时不加参数则返回所有文章列表</li>
<li>请求时加参数slug则返回特定文章内容</li>
<li>请求时加参数tag则返回特定tag下的文章列表</li>
</ol>
</li>
<li><p>在components组件文件夹内建立Navigation.vue和Footer.vue，在layouts布局文件夹的default.vue里组合起来</p>
</li>
<li><p>根目录下建立index.vue、about.vue和blogs文件夹，里面新建index.vue和_slug.vue两个文件。以下划线开头的vue文件会被Nuxt解析为动态路由，当用户在浏览器里访问符合路径规则的页面地址时就会渲染出相应的页面。</p>
</li>
<li><p>在/blogs/index.vue里面需要用Axios获取api返回的JSON数据</p>
<pre><code class="language-javascript"> import axios from 'axios'
 import myConfig from "../../myConfig";
 export default {
   asyncData({ params }) {
     return axios.get('http://127.0.0.1:4000?slug='+params.slug).then(res => {
       let blog = res.data;
       let space = [];
       let tags = blog.tags || ['none'];
       return {
         blog: blog,
         tags: tags,
         date: params.slug.substring(0,10),
         baseURL: myConfig.baseURL
       };
     })
   }
   ...
 }</code></pre>
</li>
</ol>
<p>待续。。。</p>
</div> <div id="disqus_thread"></div></div></main> <footer data-v-759117da><p data-v-759117da>Created by <strong data-v-759117da>Jenny HOU</strong>.</p></footer></div></div></div><script>window.__NUXT__=function(n){return n[0]="涨知识",n[1]="Nuxt",{layout:"default",data:[{blog:{layout:"post",title:"如何使用Nuxt建立个人博客",description:"Node解析Markdown，建立API返回JSON，Nuxt+Axios获取文章内容并生成静态页面",tags:n,slug:"2019-05-05-set-up-static-blog-using-nuxt",content:"## 项目结构\r\n\r\n```\r\nmyblog\r\n├─ .nuxt\r\n├─ api    //☆手动建立这个文件夹☆\r\n│   ├─ blogs    //需要api解析的Markdown文件夹\r\n│   │   ├─ 2019-05-05-set-up-static-blog-using-nuxt.md\r\n│   │   ├─ 2017-05-28-hao123-issue.md\r\n│   │   └─ ...\r\n│   └─ index.js //api的入口，一个 node index.js 就跑起来了\r\n│               //默认路径http://127.0.0.1:4000\r\n├─ components\r\n│   ├─ Carousel.vue\r\n│   ├─ Footer.vue\r\n│   └─ Navigation.vue\r\n├─ dist        //☆最后生成的静态文件都在这里☆\r\n├─ layouts\r\n│   ├─ default.vue //Navigation + Nuxt(主要内容) + Footer\r\n│   └─ error.vue //虽然按要求弄了error页面，可是找不到页面时还是\r\n│                //跳去服务器(github)的404页，求大神指点\r\n├─ pages\r\n│   ├─ blogs\r\n│   │   ├─ tag\r\n│   │   │   ├─ _tag.vue  //动态渲染标签下的文章列表\r\n│   │   │   │            // => /blogs/tag/aaa.html\r\n│   │   │   └─ index.vue //文章标签页 => /blogs/tag.html\r\n│   │   ├─ _slug.vue //动态渲染文章页面 \r\n│   │   │            // => /blogs/2019~~.html\r\n│   │   └─ index.vue //文章列表页 => /blogs.html\r\n│   ├─ about.vue\r\n│   └─ index.vue     //网站入口 => /index.html\r\n├─ static\r\n│   ├─ img\r\n│   │   └─ home  //首页用图 \r\n│   │       ├─ pic1.jpg // => /img/home/bird1.jpg\r\n│   │       └─ pic2.jpg // => /img/home/bird2.jpg\r\n│   ├─ favicon.ico  //网站图标 => /favicon.ico\r\n│   └─ styles.css   //公用css => /styles.css\r\n│\r\n├─ myConfig.js //一些自定义设置，用export default导出\r\n│              //可以导入到vue文件中使用\r\n│\r\n├─ nuxt.config.js //nuxt网站整体设置，用module.exports导出\r\n│                 //☆网站baseURL等设置全都在这里☆\r\n│                 //无法被导入到vue文件中使用\r\n├─ ...   //其他文件没动过\r\n```\r\n\r\n## 搭建网站的过程\r\n\r\n1. 在/api/文件夹内打开一个终端，用 node index.js 启动api，解析/api/blogs/文件夹内的Markdown文件，返回一个JSON，这个api在开发调试和生成静态页面过程中都需要保持开启状态。    \r\n这个api可以：    \r\n\t1. 请求时不加参数则返回所有文章列表\r\n\t2. 请求时加参数slug则返回特定文章内容\r\n\t3. 请求时加参数tag则返回特定tag下的文章列表\r\n\r\n2. 在components组件文件夹内建立Navigation.vue和Footer.vue，在layouts布局文件夹的default.vue里组合起来\r\n\r\n3. 根目录下建立index.vue、about.vue和blogs文件夹，里面新建index.vue和_slug.vue两个文件。以下划线开头的vue文件会被Nuxt解析为动态路由，当用户在浏览器里访问符合路径规则的页面地址时就会渲染出相应的页面。\r\n\r\n4. 在/blogs/index.vue里面需要用Axios获取api返回的JSON数据\r\n```javascript\r\n\timport axios from 'axios'\r\n\timport myConfig from \"../../myConfig\";\r\n\texport default {\r\n\t  asyncData({ params }) {\r\n\t    return axios.get('http://127.0.0.1:4000?slug='+params.slug).then(res => {\r\n\t      let blog = res.data;\r\n\t      let space = [];\r\n\t      let tags = blog.tags || ['none'];\r\n\t      return {\r\n\t        blog: blog,\r\n\t        tags: tags,\r\n\t        date: params.slug.substring(0,10),\r\n\t        baseURL: myConfig.baseURL\r\n\t      };\r\n\t    })\r\n\t  }\r\n\t  ...\r\n\t}\r\n```\r\n\r\n待续。。。"},tags:n,date:"2019-05-05",baseURL:"/"}],error:null,serverRendered:!0}}(Array(2))</script><script src="/_nuxt/17a84bd3572ee423465a.js" defer></script><script src="/_nuxt/d3c9905b0f23efd1d1af.js" defer></script><script src="/_nuxt/600f0d241938d783ce63.js" defer></script><script src="/_nuxt/c2ff236b0b488272402b.js" defer></script>
  </body>
</html>
