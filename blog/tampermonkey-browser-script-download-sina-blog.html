<!doctype html>
<html data-n-head-ssr lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D">
  <head>
    <title>下载新浪博客全部博文的油猴浏览器脚本 | Jenny的小站</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="date" name="date" content="2024-02-18"><meta data-n-head="ssr" data-hid="description" name="description" content="使用此文章的几个脚本，可以获取单个新浪博客用户的博文列表，并全部下载，再合并成一个PDF，可包含图片和目录。"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content="技术,浏览器脚本,tampermonkey"><link data-n-head="ssr" rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="/css/font-Noto-Sans-SC.css"><link data-n-head="ssr" rel="stylesheet" href="/css/style.css?2022-06-24"><link data-n-head="ssr" rel="stylesheet" href="/font-awesome/css/font-awesome.min.css"><link data-n-head="ssr" rel="stylesheet" href="/css/layout-post.css?2021-09-09-1"><link data-n-head="ssr" rel="stylesheet" href="/css/github-markdown.min.css?2021-09-09-2"><script data-n-head="ssr" src="/js/statcounter.js?2021-04-24-1"></script><script data-n-head="ssr" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" data-ad-client="ca-pub-2790001673900763" async></script><base href="/"><link rel="preload" href="/_nuxt/7e4b94164e32f472bd4c.js" as="script"><link rel="preload" href="/_nuxt/54f6f6bd48b75643c87d.js" as="script"><link rel="preload" href="/_nuxt/43e415fec2b60ff3aa38.js" as="script"><link rel="preload" href="/_nuxt/8df581cb8a5ae31cb7f4.js" as="script"><link rel="preload" href="/_nuxt/efceef13af374f2d770e.js" as="script"><style data-vue-ssr-id="638ca560:0 3191d5ad:0 779bf73e:0 72520070:0 6a62617a:0 f28bdea2:0 cb150022:0 0a408f7a:0">code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre>code[class*=language-]{font-size:1em}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background-color:#f3f3f3}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f3f3f3;border:1px solid #ddd}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.attr-value,.token.string{color:#e3116c}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.entity,.token.inserted,.token.number,.token.property,.token.regex,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.token.atrule,.token.attr-name,.token.keyword{color:#00a4db}.language-autohotkey .token.tag,.token.deleted,.token.function{color:#9a050f}.language-autohotkey .token.keyword,.token.selector,.token.tag{color:#00009f}.token.bold,.token.function,.token.important{font-weight:700}.token.italic{font-style:italic}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#3b8070;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.breadcrumbs{max-width:84%;word-wrap:break-word;word-break:break-all;display:inline-block}.nuxt-content{margin-bottom:50px;text-align:justify;word-break:break-all}.nuxt-content h2{margin:9px 0;padding:9px 0}.nuxt-content h3,.nuxt-content h4,.nuxt-content h5{margin:8px 0;padding:0}.nuxt-content h2,.nuxt-content h3{border-bottom:1px solid silver}.nuxt-content h2{font-size:30px}.nuxt-content h3{font-size:26px}.nuxt-content h4{font-size:24px}.nuxt-content h5{font-size:20px}.nuxt-content p{line-height:24px}.nuxt-content ol{padding-right:18px}.nuxt-content li{line-height:24px}.nuxt-content iframe{margin:0 20px}.nuxt-content iframe.youtube{margin:8px auto 8px 20px;width:480px;height:360px;display:block}.nuxt-content blockquote{margin:16px 0;padding:10px;color:#6a737d;background-color:#f8f8f8;border-left:.25em solid #dfe2e5}.nuxt-content a,.toc a,.toc a:active,.toc a:visited{color:#000;font-weight:700;text-decoration:underline}.nuxt-content a:hover,.toc a:hover{color:grey}li.toc3{list-style:circle;margin-left:15px}a#comment-link{top:0}.blog-desc{margin:10px 0;padding:10px;color:#666;background-color:rgba(0,0,0,.025)}#disqus_thread{margin-top:60px}.prev-next{margin:20px auto;display:flex;justify-content:space-between}.prev-next a{display:block}.next,.prev{max-width:42%;color:grey;cursor:pointer}.prev{text-align:left}.next{text-align:right}.next:hover,.prev:hover{color:#000}.prev-next-arrow{font-size:28px}#comment{margin:40px 0 0;text-align:center}.loadCommentBtn{margin-bottom:20px;cursor:pointer;display:inline-block}.loadCommentBtn:hover{color:grey}@media (max-width:768px){.nuxt-content h2,.nuxt-content h3,.nuxt-content h4,.nuxt-content h5{margin:9px 0}.nuxt-content blockquote{margin:16px 0}.nuxt-content iframe{margin:0}.nuxt-content iframe.youtube{margin:8px auto;width:100%}.nuxt-content ul{padding-left:20px}.nuxt-content pre{margin-left:0;margin-right:0}.next,.prev{margin:0}#comment{margin:40px 0 0}}@media (max-width:539px){.nuxt-content iframe.youtube{height:auto}}#my-info:hover{border-color:#000}#my-info a{display:block}.blog-gallery{margin:20px auto;display:flex;justify-content:center;flex-wrap:wrap;overflow:hidden}.blog-gallery-unit{margin:40px 20px 0;width:46%;background:#fff;border:1px solid silver;border-radius:5px}.blog-gallery-unit:first-child,.blog-gallery-unit:nth-child(2){margin-top:20px}.blog-gallery-unit:nth-child(2n-1){margin-left:0}.blog-gallery-unit:nth-child(2n){margin-right:0}.blog-gallery-unit:hover{border-color:#000}.blog-gallery-inner{padding:10px;height:100%}.blog-gallery-inner h4{margin-top:0;margin-bottom:8px;max-height:42px;line-height:20px;overflow:hidden}.blog-gallery-unit .date-lang,.blog-gallery-unit .desc-tag{margin-top:8px;margin-bottom:8px}.blog-gallery-desc{line-height:21px;max-height:64px;display:block;overflow:hidden}.blog-gallery-cat,.blog-gallery-tag{margin:1px;padding:0 8px 1px;font-size:14px;font-family:Noto Sans SC,sans-serif;line-height:20px;border-radius:999px;display:inline-block}.blog-gallery-cat{color:#4c4c4c;border:1px solid #4c4c4c}.blog-gallery-tag{color:#fff;background:grey}.blog-gallery-lang{padding:0 5px;width:60px;font-size:14px;text-align:center;color:grey;border:1px solid silver;border-radius:4px}@media (max-width:768px){.blog-gallery-unit:nth-child(2n-1){margin-right:15px}.blog-gallery-unit:nth-child(2n){margin-left:15px}}@media (max-width:425px){.blog-gallery-unit{margin:20px 0 0;width:100%}.blog-gallery-unit:nth-child(2n-1){margin-right:0}.blog-gallery-unit:nth-child(2n){margin-left:0}}.col-1{margin:10px auto;width:98%}.col-1:first-child,.col-1:nth-child(2){margin-top:10px}.col-1:nth-child(2n),.col-1:nth-child(2n-1){margin:10px}.col-1 .blog-gallery-inner{padding:10px}.col-1 h4{margin:10px 0}.col-1 p{margin:8px 0}.col-1 .desc-tag{display:none}@media (max-width:768px){.col-1{width:44%}.col-1:nth-child(2n-1){margin-right:15px}.col-1:nth-child(2n){margin-left:15px}.col-1 .desc-tag{display:block}}@media (max-width:425px){.col-1{margin:20px 0 0;width:100%}.col-1:first-child,.col-1:nth-child(2){margin-top:10px}.col-1:nth-child(2n),.col-1:nth-child(2n-1){margin:10px}}.hidden{display:none}.side-nav .close{position:absolute;top:4px;right:18px;font-size:24px;cursor:pointer;display:none}.desk-fix{position:fixed;top:0;left:0;right:0;bottom:0;margin:auto;padding:10px;width:400px;height:400px;overflow-y:overlay;display:none}.desk-fix .close{display:block}@media (max-width:768px){.side-nav{position:fixed;top:0;left:0;margin:60px 10px 40px;padding:10px;width:calc(100vw - 20px);height:calc(100vh - 100px);overflow-y:scroll;display:none}.side-nav .close{display:block}}.show{display:block}.list-btn{position:fixed;right:20px;bottom:90px;padding-left:6px;width:38px;height:38px;font-size:24px;color:grey;background-color:#f9f9f9;border:1px solid grey;border-radius:3px;cursor:pointer;opacity:.6;transition:opacity .3s;display:none}.desk-list-btn{display:block}@media (max-width:768px){.list-btn{display:block}}.list-btn:hover{opacity:1}.list-btn-hidden{opacity:0;display:none}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="container"><nav><div class="nav-wrap"><header><a href="/" class="no-decor-link"><p class="nav-home">Jenny's blog</p></a></header> <div class="nav-btn"><div class="bar"></div> <div class="bar"></div> <div class="bar"></div> <div class="bar"></div></div> <div class="nav-mask"></div> <div class="body-mask"></div> <ul class="nav-ul"><span id="lang-switch" title="将界面文本切换成中文" class="nav-link" style="padding-left:10px"><i class="fa fa-language" style="font-size:20px"></i>
        中/En
      </span> <li class="nav-link"><a href="/" target="_self" class="no-decor-link">
          Home<!----><!----></a> <!----></li><li class="nav-parent"><!----> <span><span>About
            <i class="fa fa-angle-down"></i></span> <div class="nav-child" style="width:100px"><ul><li><a href="/resume" target="_self" class="no-decor-link">
                  Resume<!----><!----></a></li><li><a href="/portfolio" target="_self" class="no-decor-link">
                  Portfolio<!----><!----></a></li></ul></div></span></li><li class="nav-parent"><!----> <span><span>Writings
            <i class="fa fa-angle-down"></i></span> <div class="nav-child" style="width:100px"><ul><li><a href="/blog" target="_self" class="no-decor-link">
                  Blog<!----><!----></a></li><li><a href="/desk-weibo" target="_self" class="no-decor-link">
                  Desk<!----><!----></a></li></ul></div></span></li><li class="nav-parent"><!----> <span><span>Tool
            <i class="fa fa-angle-down"></i></span> <div class="nav-child" style="width:200px"><ul><li><a href="/tool/free-resume-generator" target="_self" class="no-decor-link">
                  Editable Free Resume Generator<!----><!----></a></li><li><a href="/tool/css-shape-guide" target="_self" class="no-decor-link">
                  Pure CSS Shapes--A Handy Guidebook<!----><!----></a></li><li><a href="/tool/split-bill-calculator" target="_self" class="no-decor-link">
                  Calculator for splitting dining bills<!----><!----></a></li><li><a href="/nuxt-maupassant" target="_self" class="no-decor-link">
                  Nuxt blog theme Maupassant<!----><!----></a></li><li><a href="/desk-weibo" target="_self" class="no-decor-link">
                  Self-hosted weibo solution<!----><!----></a></li><li><a href="/april-bill" target="_blank" class="no-decor-link">
                  SPA bookkeeping app<!----><i class="fa fa-external-link"></i></a></li></ul></div></span></li><li class="nav-link"><a href="/store" target="_self" class="no-decor-link">
          Store<!----><!----></a> <!----></li><li class="nav-link"><a href="https://wj.qq.com/s2/3731207/f0cd/" target="_blank" class="no-decor-link">
          Contact<span> </span><i class="fa fa-external-link"></i></a> <!----></li></ul></div></nav> <div class="container-main"><div class="below-nav"><div class="breadcrumbs"><span><a href="/"> 
        Home 
      </a> <span>/</span></span><span><a href="/blog"> 
        Blog 
      </a> <span>/</span></span><span><span> 
        This page
      </span> <!----></span></div></div> <div class="blog-wrap"><main class="blog-main"><h1 class="align-center article-title">下载新浪博客全部博文的油猴浏览器脚本</h1> <p class="align-center"><span class="blog-date"><i class="fa fa-calendar"></i>
        2024-02-18
      </span> <a href="/blog/language/中文"><span class="blog-lang"><i class="fa fa-language"></i>
          中文
        </span></a></p> <p class="align-center"><span class="blog-cat"><a href="/blog/category/技术"><i class="fa fa-folder-open"></i>
          技术
        </a></span></p> <p class="blog-tags align-center"><span class="blog-tag"><a href="/blog/tag/浏览器脚本"><i class="fa fa-tag"></i>
          浏览器脚本
        </a></span></p> <p class="blog-desc">使用此文章的几个脚本，可以获取单个新浪博客用户的博文列表，并全部下载，再合并成一个PDF，可包含图片和目录。</p> <article><ul class="toc"><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#前言">前言</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#获取文章列表，存入localstorage">获取文章列表，存入localStorage</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#设置下载文件夹，关闭浏览器询问">设置下载文件夹，关闭浏览器询问</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#遍历文章列表，下载每一篇文章">遍历文章列表，下载每一篇文章</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#合并文章为一个txt文件">合并文章为一个txt文件</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#复制html到浏览器，替换图片链接">复制html到浏览器，替换图片链接</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#给文章标题添加id">给文章标题添加id</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#给整个页面添加博客目录功能区">给整个页面添加博客目录功能区</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#保存整个页面为pdf">保存整个页面为PDF</a></li></ul> <div class="markdown-body nuxt-content"><h2 id="前言"><a aria-hidden="true" href="#%E5%89%8D%E8%A8%80" tabindex="-1"><span class="icon icon-link"></span></a>前言</h2>
<p>本篇文章会介绍如何下载新浪博客文章到PDF，下载内容包括图片，可带目录。</p>
<p>需要有一定的前端编程和浏览器知识，如果没有的话，建议找一个会的朋友帮你下载。</p>
<h2 id="获取文章列表，存入localstorage"><a aria-hidden="true" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%EF%BC%8C%E5%AD%98%E5%85%A5localstorage" tabindex="-1"><span class="icon icon-link"></span></a>获取文章列表，存入localStorage</h2>
<p>在新浪博客找到要保存的用户的主页，在主页点击“博文目录”，在此页按下 <code>F12</code> 打开 <code>console</code> ，输入以下代码。</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"div.articleCell.SG_j_linedot1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> articles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pList <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> pList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">".atc_title a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> pList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">".atc_tm.SG_txtc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token punctuation">,</span>
        link<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token property-access">href</span><span class="token punctuation">,</span>
        time<span class="token operator">:</span> b<span class="token punctuation">.</span><span class="token property-access">innerHTML</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    articles<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>articles<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>
<p>然后 <code>console</code> 里面会显示拿到的本页的博文的清单，如果博主的博文超过50篇，那接下来就要点击“下一页”以保存下一页的博文清单。</p>
<p>请自己翻页，然后每一页执行一次，再手动合并成一个 <code>Array</code> ，如果你不会这一步，可能这篇教学不太适合你。</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token comment">//把文章列表写成JSON</span>
articleJSON <span class="token operator">=</span> <span class="token punctuation">{</span>list<span class="token operator">:</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">"文章标题"</span><span class="token punctuation">,</span>
  link<span class="token operator">:</span> <span class="token string">"文章链接"</span><span class="token punctuation">,</span>
  time<span class="token operator">:</span> <span class="token string">"发表时间"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//存入localStorage</span>
<span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">setItem</span><span class="token punctuation">(</span><span class="token string">"articleJSON"</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>articleJSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">setItem</span><span class="token punctuation">(</span><span class="token string">"curArticleNum"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h2 id="设置下载文件夹，关闭浏览器询问"><a aria-hidden="true" href="#%E8%AE%BE%E7%BD%AE%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E5%85%B3%E9%97%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%A2%E9%97%AE" tabindex="-1"><span class="icon icon-link"></span></a>设置下载文件夹，关闭浏览器询问</h2>
<p>新建一个文件夹，把浏览器的默认下载文件夹设置成这个文件夹，然后关闭“每次下载都询问保存位置”。</p>
<p>此外，在执行下一部分代码的时候，浏览器一定会提示“已阻止网站自动下载”，此时需要眼疾手快地点开提示，改成“允许下载”。</p>
<h2 id="遍历文章列表，下载每一篇文章"><a aria-hidden="true" href="#%E9%81%8D%E5%8E%86%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%EF%BC%8C%E4%B8%8B%E8%BD%BD%E6%AF%8F%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0" tabindex="-1"><span class="icon icon-link"></span></a>遍历文章列表，下载每一篇文章</h2>
<p>打开博主的最新一篇博文详情页，不要打开其他新浪博客域名的页面，放在这里别动。</p>
<p>在tampermonkey新建脚本，输入以下代码并保存。</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token comment">// ==UserScript==</span>
<span class="token comment">// @name         Download Sina blog</span>
<span class="token comment">// @namespace    http://tampermonkey.net/</span>
<span class="token comment">// @version      0.1</span>
<span class="token comment">// @description  try to take over the world!</span>
<span class="token comment">// @author       You</span>
<span class="token comment">// @match        https://blog.sina.com.cn/s/*</span>
<span class="token comment">// @icon         https://www.google.com/s2/favicons?sz=64&domain=sina.com.cn</span>
<span class="token comment">// @grant        none</span>
<span class="token comment">// ==/UserScript==</span>

<span class="token comment">//参考文章</span>
<span class="token comment">//https://blog.csdn.net/qq_45677671/article/details/125905454</span>
<span class="token comment">//【JS】将字符串保存成文件到本地（.txt、.json、.md...）</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token comment">//如果准备好了，就把这个return注释掉，脚本就会执行了</span>
<span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> articleJSON <span class="token operator">=</span> <span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getItem</span><span class="token punctuation">(</span><span class="token string">"articleJSON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
articleJSON <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>articleJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> articleList <span class="token operator">=</span> articleJSON<span class="token punctuation">.</span><span class="token property-access">list</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> curArticleNum <span class="token operator">=</span> <span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getItem</span><span class="token punctuation">(</span><span class="token string">"curArticleNum"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> curArticle <span class="token operator">=</span> articleList<span class="token punctuation">[</span>curArticleNum<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//要保存的字符串</span>
    <span class="token comment">//获取标题</span>
    <span class="token keyword">var</span> title <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> stringData <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h2></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h2>\n&lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>curArticle<span class="token punctuation">.</span><span class="token property-access">time</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p>&lt;div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">//获取正文</span>
    stringData <span class="token operator">+=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">"#sina_keyword_ad_area2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">+</span><span class="token string">"\n&lt;/div>\n"</span><span class="token punctuation">;</span>
    <span class="token comment">// stringData 表示要转换的字符串数据，type 表示要转换的数据格式</span>
    <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>stringData<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">"text/plain;charset=utf-8"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 根据 blob生成 url链接</span>
    <span class="token keyword">const</span> objectURL <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token method function property-access">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建一个 a 标签Tag</span>
    <span class="token keyword">const</span> aTag <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置文件的下载地址</span>
    aTag<span class="token punctuation">.</span><span class="token property-access">href</span> <span class="token operator">=</span> objectURL<span class="token punctuation">;</span>
    <span class="token comment">// 设置保存后的文件名称</span>
    <span class="token comment">//padStart用来给文件名前面补0，想要几位数，就在第一个参数写几</span>
    <span class="token comment">//但是padStart只能作用于字符串，所以要先toString()</span>
    <span class="token comment">//以下是三位数字的例子，eg:001.txt, 002.txt</span>
    <span class="token keyword">var</span> fileName <span class="token operator">=</span> <span class="token punctuation">(</span>curArticleNum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    aTag<span class="token punctuation">.</span><span class="token property-access">download</span> <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">".txt"</span><span class="token punctuation">;</span>
    <span class="token comment">// 给 a 标签添加点击事件</span>
    aTag<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 释放一个之前已经存在的、通过调用 URL.createObjectURL() 创建的 URL 对象。</span>
    <span class="token comment">// 当你结束使用某个 URL 对象之后，应该通过调用这个方法来让浏览器知道不用在内存中继续保留对这个文件的引用了。</span>
    <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token method function property-access">revokeObjectURL</span><span class="token punctuation">(</span>objectURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    curArticleNum<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">setItem</span><span class="token punctuation">(</span><span class="token string">"curArticleNum"</span><span class="token punctuation">,</span> curArticleNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//全下载完了就return</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>curArticleNum<span class="token operator">==</span>articleList<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
    <span class="token comment">//没下载完则进入下一篇的页面</span>
    <span class="token keyword">var</span> nextArticle <span class="token operator">=</span> articleList<span class="token punctuation">[</span>curArticleNum<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">location</span> <span class="token operator">=</span> nextArticle<span class="token punctuation">.</span><span class="token property-access">link</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>刷新刚才的博文详情页，代码就会开始执行，遍历文章列表，下载所有文章的html为txt，保存到你的电脑上。</p>
<p>执行完之后记得把脚本的return的注释删掉，或者直接把整个脚本关掉，不然下次打开任何一个新浪博客的页面，它又会自动执行。</p>
<h2 id="合并文章为一个txt文件"><a aria-hidden="true" href="#%E5%90%88%E5%B9%B6%E6%96%87%E7%AB%A0%E4%B8%BA%E4%B8%80%E4%B8%AAtxt%E6%96%87%E4%BB%B6" tabindex="-1"><span class="icon icon-link"></span></a>合并文章为一个txt文件</h2>
<p>使用命令行将所有txt文件合并成一个txt文件。</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>type *.txt>index.txt
</code></pre></div>
<h2 id="复制html到浏览器，替换图片链接"><a aria-hidden="true" href="#%E5%A4%8D%E5%88%B6html%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E6%9B%BF%E6%8D%A2%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5" tabindex="-1"><span class="icon icon-link"></span></a>复制html到浏览器，替换图片链接</h2>
<p>打开新浪博客的任意一个页面，在 <code>console</code> 里面输入</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code></pre></div>
<p>清除该页body里的所有HTML之后，再点开 <code>elements</code> ，把合并后的TXT文件里的html复制粘贴到该页的body里面。</p>
<p>为什么要这样做呢？因为新浪博客的图片链接只能在新浪博客的页面才能显示图片，为了能把图片也下载下来，我们需要用这种方式。</p>
<p>此时有些图片不显示，这是因为之前我们设置的每一篇的下载间隔为3秒，如果该篇博客包含了很多图片，3秒可能不够全部加载，此时新浪博客有一个缓冲加载图片的机制，会导致我们下载下来的html里面的图片不显示，解决办法是从图片标签里获取到真正的图片链接，并替换缓冲的图片链接。</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword">var</span> allImg <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allImg<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> real_src <span class="token operator">=</span> allImg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">getAttribute</span><span class="token punctuation">(</span><span class="token string">"real_src"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    allImg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> real_src<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>然后图片就能显示了。</p>
<h2 id="给文章标题添加id"><a aria-hidden="true" href="#%E7%BB%99%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E6%B7%BB%E5%8A%A0id" tabindex="-1"><span class="icon icon-link"></span></a>给文章标题添加id</h2>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword">var</span> h2All <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> h2All<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h2All<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h2 id="给整个页面添加博客目录功能区"><a aria-hidden="true" href="#%E7%BB%99%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2%E7%9B%AE%E5%BD%95%E5%8A%9F%E8%83%BD%E5%8C%BA" tabindex="-1"><span class="icon icon-link"></span></a>给整个页面添加博客目录功能区</h2>
<div class="nuxt-content-highlight"><pre class="line-numbers language-js"><code><span class="token keyword">var</span> articleJSON <span class="token operator">=</span> <span class="token dom variable">localStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getItem</span><span class="token punctuation">(</span><span class="token string">"articleJSON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
articleJSON <span class="token operator">=</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>articleJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> articleJSON<span class="token punctuation">.</span><span class="token property-access">list</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;style>html,body{width:800px;word-break:break-all;}body{margin:0 10px;}img{max-width:680px;}&lt;/style>&lt;div id="menu">&lt;style>#menu a{font-weight:bold;text-decoration:none;}#menu span{font-size: 14px;color:silver;}&lt;/style>&lt;h3>目录&lt;/h3></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    html <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p>&lt;a href="#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" target="_self"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a>&lt;br>&lt;span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">time</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span>&lt;/p></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
html<span class="token operator">+=</span><span class="token string">"&lt;/div>"</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
</code></pre></div>
<p>复制生成的html，手动粘贴到body的开头。</p>
<h2 id="保存整个页面为pdf"><a aria-hidden="true" href="#%E4%BF%9D%E5%AD%98%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2%E4%B8%BApdf" tabindex="-1"><span class="icon icon-link"></span></a>保存整个页面为PDF</h2>
<p>使用浏览器自带的“打印到PDF”功能，我们可以保存整页为PDF，完成。</p>
<p>经过测试，文章数量多，且包含的图片多的时候，打印预览窗口弹出的速度会比较慢，等一等就可以了。</p>
<p>全文完。</p></div></article> <div class="prev-next"><div class="prev"><a href="/blog/fengshen-trilogy-part-1-synopsis" title="A new adaption of the novel The Investiture of the Gods, read the part one full story here." class="no-decor-link"><span class="prev-next-arrow"><i class="fa fa-long-arrow-left"></i></span> <br> <span class="title">Creation of the Gods I: Kingdom of Storms, full story</span></a></div> <div class="next"><!----></div></div> <div id="disqus_thread"><div class="loadCommentBtn"><i aria-hidden="true" class="fa fa-comment"></i>
        Load Comments
      </div></div></main> <aside class="blog-side"><div id="my-info" class="side-unit"><a href="/resume" class="no-decor-link"><div style="position:absolute">Author</div> <img src="/img/mypic.png" style="width:64px;margin:10px auto;display:block"> <div>Self-taught Front-End developer, experienced E-Commerce specialist, expert in Photoshop and Excel. Welcome to my blog~</div></a></div> <div><h3 class="align-center"><span style="border-bottom:2px solid #000">
        	Related Posts
        </span></h3> <div class="blog-gallery"><div class="blog-gallery-unit col-1"><a href="/blog/house-wife" title="资助8年的女孩做全职主妇，你什么想法？啥时候男人都抢着当主夫了，我就赞成女人做主妇。" class="no-decor-link"><div class="blog-gallery-inner align-left"><h4>关于“全职主妇”</h4> <p class="date-lang"><span class="blog-date"><i class="fa fa-calendar"></i>
               2023-03-06
            </span> <span class="blog-gallery-lang"><i class="fa fa-language"></i>
              中文
            </span></p> <p class="desc-tag"><span class="blog-gallery-desc">资助8年的女孩做全职主妇，你什么想法？啥时候男人都抢着当主夫了，我就赞成女人做主妇。</span></p> <p class="desc-tag"><span><span class="blog-gallery-cat"><i class="fa fa-folder-open"></i>
                时评
              </span></span> <span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                家庭主妇
              </span></span></p></div></a></div><div class="blog-gallery-unit col-1"><a href="/blog/gololyod" title="2019年的冬天，到底有什么特别呢" class="no-decor-link"><div class="blog-gallery-inner align-left"><h4>听了柳拜的《雾凇》，真好听啊</h4> <p class="date-lang"><span class="blog-date"><i class="fa fa-calendar"></i>
               2023-09-20
            </span> <span class="blog-gallery-lang"><i class="fa fa-language"></i>
              中文
            </span></p> <p class="desc-tag"><span class="blog-gallery-desc">2019年的冬天，到底有什么特别呢</span></p> <p class="desc-tag"><span><span class="blog-gallery-cat"><i class="fa fa-folder-open"></i>
                乐评
              </span></span> <span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                柳拜
              </span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                俄国音乐
              </span></span></p></div></a></div><div class="blog-gallery-unit col-1"><a href="/blog/lighten-nuxt-website" title="Nuxt默认会将所有vue文件使用的模块打包进最后的网站文件，所以最好不要在博客页渲染Markdown" class="no-decor-link"><div class="blog-gallery-inner align-left"><h4>如何减轻Nuxt打包生成的代码量</h4> <p class="date-lang"><span class="blog-date"><i class="fa fa-calendar"></i>
               2019-05-18
            </span> <span class="blog-gallery-lang"><i class="fa fa-language"></i>
              中文
            </span></p> <p class="desc-tag"><span class="blog-gallery-desc">Nuxt默认会将所有vue文件使用的模块打包进最后的网站文件，所以最好不要在博客页渲染Markdown</span></p> <p class="desc-tag"><span><span class="blog-gallery-cat"><i class="fa fa-folder-open"></i>
                技术
              </span></span> <span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                我的项目
              </span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                Nuxt.js
              </span></span></p></div></a></div><div class="blog-gallery-unit col-1"><a href="/blog/gintama-shigeshige-and-tokugawa-iemochi" title="戏说不是胡说，茂茂不是家茂，真实的人生没有那么搞笑。" class="no-decor-link"><div class="blog-gallery-inner align-left"><h4>研究了一下《银魂》的茂茂将军，感叹一下无常的人生</h4> <p class="date-lang"><span class="blog-date"><i class="fa fa-calendar"></i>
               2022-01-25
            </span> <span class="blog-gallery-lang"><i class="fa fa-language"></i>
              中文
            </span></p> <p class="desc-tag"><span class="blog-gallery-desc">戏说不是胡说，茂茂不是家茂，真实的人生没有那么搞笑。</span></p> <p class="desc-tag"><span><span class="blog-gallery-cat"><i class="fa fa-folder-open"></i>
                剧评
              </span></span> <span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                银魂
              </span><span class="blog-gallery-tag"><i class="fa fa-tag"></i>
                笃姬
              </span></span></p></div></a></div></div></div> <div class="side-nav side-unit desk-fix"><ul class="toc"><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#前言">前言</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#获取文章列表，存入localstorage">获取文章列表，存入localStorage</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#设置下载文件夹，关闭浏览器询问">设置下载文件夹，关闭浏览器询问</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#遍历文章列表，下载每一篇文章">遍历文章列表，下载每一篇文章</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#合并文章为一个txt文件">合并文章为一个txt文件</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#复制html到浏览器，替换图片链接">复制html到浏览器，替换图片链接</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#给文章标题添加id">给文章标题添加id</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#给整个页面添加博客目录功能区">给整个页面添加博客目录功能区</a></li><li class="toc2"><a href="/blog/tampermonkey-browser-script-download-sina-blog#保存整个页面为pdf">保存整个页面为PDF</a></li></ul> <div class="close"><i class="fa fa-window-close-o"></i></div></div> <div class="list-btn desk-list-btn list-btn-hidden"><i class="fa fa-list-ul"></i></div></aside></div></div> <footer><p>Created with Nuxt.js <br>
    	Designed by  
    	<a href="https://github.com/c53hzn" target="_blank" class="no-decor-link"><strong>Jenny HOU</strong> <i class="fa fa-github font-20"></i></a></p> <div class="go-top go-top-hidden"><div class="arrow"></div> <div class="stick"></div></div></footer></div></div></div><script>window.__NUXT__=function(e,a,p,t,l,s,y,r,c,u,v,i,n,o,d,g,h,m,N,E,A,B,b,x,f,w,D,S,k,_,F,L,j,I,T,C,U,R,H,O,J,P,Z,q,G,z,M,X,K,Y,$,Q,V,W,ee,ae,pe,te,le,se,ye,re,ce,ue,ve,ie,ne,oe,de,ge,he,me,Ne,Ee,Ae,Be,be,xe,fe,we,De,Se,ke,_e,Fe,Le,je,Ie,Te,Ce,Ue,Re,He,Oe,Je,Pe,Ze,qe,Ge,ze){return Ie[0]="tampermonkey",{layout:"post",data:[{blog:{slug:je,description:"使用此文章的几个脚本，可以获取单个新浪博客用户的博文列表，并全部下载，再合并成一个PDF，可包含图片和目录。",date:"2024-02-18T00:00:00.000Z",language:ee,title:"下载新浪博客全部博文的油猴浏览器脚本",categories:["技术"],tags:["浏览器脚本"],keywords:Ie,comments:!0,toc:[{id:"前言",depth:2,text:"前言"},{id:Te,depth:2,text:Ce},{id:ce,depth:2,text:ce},{id:ue,depth:2,text:ue},{id:ve,depth:2,text:ve},{id:ie,depth:2,text:ie},{id:ne,depth:2,text:ne},{id:oe,depth:2,text:oe},{id:Ue,depth:2,text:Re}],body:{type:"root",children:[{type:a,tag:I,props:{id:"前言"},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E5%89%8D%E8%A8%80",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:"前言"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"本篇文章会介绍如何下载新浪博客文章到PDF，下载内容包括图片，可带目录。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"需要有一定的前端编程和浏览器知识，如果没有的话，建议找一个会的朋友帮你下载。"}]},{type:e,value:s},{type:a,tag:I,props:{id:Te},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E8%8E%B7%E5%8F%96%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%EF%BC%8C%E5%AD%98%E5%85%A5localstorage",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:Ce}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"在新浪博客找到要保存的用户的主页，在主页点击“博文目录”，在此页按下 "},{type:a,tag:b,props:{},children:[{type:e,value:"F12"}]},{type:e,value:" 打开 "},{type:a,tag:b,props:{},children:[{type:e,value:G}]},{type:e,value:" ，输入以下代码。"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" list "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:de}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"div.articleCell.SG_j_linedot1"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" articles "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:ge}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:e,value:Ee},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:ae}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:" i"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:pe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" pList "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:Ee},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:de}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"p"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" a "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" pList"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:te}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'".atc_title a"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" b "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" pList"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"1"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:te}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'".atc_tm.SG_txtc"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" obj "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:"\n        title"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:" a"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:le}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:"\n        link"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:" a"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"href"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:"\n        time"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:" b"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:le}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:"\n    articles"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"push"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"obj"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,G,K]},children:[{type:e,value:G}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"log"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,he,K]},children:[{type:e,value:me}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:He}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"articles"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"然后 "},{type:a,tag:b,props:{},children:[{type:e,value:G}]},{type:e,value:" 里面会显示拿到的本页的博文的清单，如果博主的博文超过50篇，那接下来就要点击“下一页”以保存下一页的博文清单。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"请自己翻页，然后每一页执行一次，再手动合并成一个 "},{type:a,tag:b,props:{},children:[{type:e,value:"Array"}]},{type:e,value:" ，如果你不会这一步，可能这篇教学不太适合你。"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//把文章列表写成JSON"}]},{type:e,value:Ae},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:se},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:"\n  title"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"文章标题"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:"\n  link"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"文章链接"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:"\n  time"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"发表时间"'}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//存入localStorage"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,he,K]},children:[{type:e,value:me}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:He}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:xe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:I,props:{id:ce},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E8%AE%BE%E7%BD%AE%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E5%85%B3%E9%97%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%A2%E9%97%AE",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:ce}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"新建一个文件夹，把浏览器的默认下载文件夹设置成这个文件夹，然后关闭“每次下载都询问保存位置”。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"此外，在执行下一部分代码的时候，浏览器一定会提示“已阻止网站自动下载”，此时需要眼疾手快地点开提示，改成“允许下载”。"}]},{type:e,value:s},{type:a,tag:I,props:{id:ue},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E9%81%8D%E5%8E%86%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%EF%BC%8C%E4%B8%8B%E8%BD%BD%E6%AF%8F%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:ue}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"打开博主的最新一篇博文详情页，不要打开其他新浪博客域名的页面，放在这里别动。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"在tampermonkey新建脚本，输入以下代码并保存。"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// ==UserScript=="}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @name         Download Sina blog"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @namespace    http://tampermonkey.net/"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @version      0.1"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @description  try to take over the world!"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @author       You"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @match        https://blog.sina.com.cn/s/*"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @icon         https://www.google.com/s2/favicons?sz=64&domain=sina.com.cn"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// @grant        none"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// ==/UserScript=="}]},{type:e,value:we},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//参考文章"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//https://blog.csdn.net/qq_45677671/article/details/125905454"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//【JS】将字符串保存成文件到本地（.txt、.json、.md...）"}]},{type:e,value:we},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:m}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"'use strict'"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//如果准备好了，就把这个return注释掉，脚本就会执行了"}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:"return"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:Oe},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:De}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:Ae},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,he,K]},children:[{type:e,value:me}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"parse"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:xe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" articleList "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:Je},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:se}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" curArticleNum "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:De}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" curArticle "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:Pe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Ne},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:we},{type:a,tag:p,props:{className:[t,m]},children:[{type:e,value:"setTimeout"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:m}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//要保存的字符串"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//获取标题"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" title "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:te}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"h2"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" stringData "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,Se]},children:[{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"<h2>"}]},{type:a,tag:p,props:{className:[t,ye]},children:[{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:re}]},{type:e,value:"title"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:le}]},{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:D}]}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"</h2>\\n<p>"}]},{type:a,tag:p,props:{className:[t,ye]},children:[{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:re}]},{type:e,value:"curArticle"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"time"}]},{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:D}]}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"</p><div>"}]},{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//获取正文"}]},{type:e,value:"\n    stringData "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+="}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:te}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"#sina_keyword_ad_area2"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:le}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+"}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"\\n</div>\\n"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// stringData 表示要转换的字符串数据，type 表示要转换的数据格式"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:ke}]},{type:e,value:" blob "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:"new"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,K]},children:[{type:e,value:"Blob"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:"stringData"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:"\n        type"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:q}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"text/plain;charset=utf-8"'}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 根据 blob生成 url链接"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:ke}]},{type:e,value:" objectURL "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,Ze]},children:[{type:e,value:"URL"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"createObjectURL"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"blob"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 创建一个 a 标签Tag"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:ke}]},{type:e,value:" aTag "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"createElement"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"'a'"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 设置文件的下载地址"}]},{type:e,value:_e},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"href"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" objectURL"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 设置保存后的文件名称"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//padStart用来给文件名前面补0，想要几位数，就在第一个参数写几"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//但是padStart只能作用于字符串，所以要先toString()"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//以下是三位数字的例子，eg:001.txt, 002.txt"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" fileName "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:Ne},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+"}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"1"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:_e},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"download"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" fileName"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Le}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"3"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"'0'"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+"}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'".txt"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 给 a 标签添加点击事件"}]},{type:e,value:_e},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"click"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 释放一个之前已经存在的、通过调用 URL.createObjectURL() 创建的 URL 对象。"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"// 当你结束使用某个 URL 对象之后，应该通过调用这个方法来让浏览器知道不用在内存中继续保留对这个文件的引用了。"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,Ze]},children:[{type:e,value:"URL"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"revokeObjectURL"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"objectURL"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:"\n    curArticleNum"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:pe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:" curArticleNum"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//全下载完了就return"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:"if"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:Ne},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"=="}]},{type:e,value:"articleList"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:ae}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:"return"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,E]},children:[{type:e,value:"//没下载完则进入下一篇的页面"}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" nextArticle "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:Pe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Ne},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:"window"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"location"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" nextArticle"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"link"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"3000"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"刷新刚才的博文详情页，代码就会开始执行，遍历文章列表，下载所有文章的html为txt，保存到你的电脑上。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"执行完之后记得把脚本的return的注释删掉，或者直接把整个脚本关掉，不然下次打开任何一个新浪博客的页面，它又会自动执行。"}]},{type:e,value:s},{type:a,tag:I,props:{id:ve},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E5%90%88%E5%B9%B6%E6%96%87%E7%AB%A0%E4%B8%BA%E4%B8%80%E4%B8%AAtxt%E6%96%87%E4%BB%B6",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:ve}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"使用命令行将所有txt文件合并成一个txt文件。"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,"language-text"]},children:[{type:a,tag:b,props:{},children:[{type:e,value:"type *.txt>index.txt\n"}]}]}]},{type:e,value:s},{type:a,tag:I,props:{id:ie},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E5%A4%8D%E5%88%B6html%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E6%9B%BF%E6%8D%A2%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:ie}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"打开新浪博客的任意一个页面，在 "},{type:a,tag:b,props:{},children:[{type:e,value:G}]},{type:e,value:" 里面输入"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:te}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"body"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:le}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'""'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"清除该页body里的所有HTML之后，再点开 "},{type:a,tag:b,props:{},children:[{type:e,value:"elements"}]},{type:e,value:" ，把合并后的TXT文件里的html复制粘贴到该页的body里面。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"为什么要这样做呢？因为新浪博客的图片链接只能在新浪博客的页面才能显示图片，为了能把图片也下载下来，我们需要用这种方式。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"此时有些图片不显示，这是因为之前我们设置的每一篇的下载间隔为3秒，如果该篇博客包含了很多图片，3秒可能不够全部加载，此时新浪博客有一个缓冲加载图片的机制，会导致我们下载下来的html里面的图片不显示，解决办法是从图片标签里获取到真正的图片链接，并替换缓冲的图片链接。"}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" allImg "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:de}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"img"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:ge}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:e,value:qe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:ae}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:" i"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:pe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" real_src "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:qe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"getAttribute"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"real_src"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:"\n    allImg"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"src"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" real_src"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"然后图片就能显示了。"}]},{type:e,value:s},{type:a,tag:I,props:{id:ne},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E7%BB%99%E6%96%87%E7%AB%A0%E6%A0%87%E9%A2%98%E6%B7%BB%E5%8A%A0id",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:ne}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" h2All "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:M}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:de}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"h2"'}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:ge}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" j "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:" j "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:e,value:" h2All"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:ae}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:" j"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:pe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" num "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"j"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+"}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"1"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:"\n    h2All"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:"j"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"id"}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:" num"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Le}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"3"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"'0'"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:I,props:{id:oe},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E7%BB%99%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2%E7%9B%AE%E5%BD%95%E5%8A%9F%E8%83%BD%E5%8C%BA",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:oe}]},{type:e,value:s},{type:a,tag:O,props:{className:[J]},children:[{type:a,tag:P,props:{className:[Z,z]},children:[{type:a,tag:b,props:{},children:[{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:Oe},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,x,f]},children:[{type:e,value:V}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:De}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:be}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:Ae},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,he,K]},children:[{type:e,value:me}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"parse"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:xe},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" list "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:Je},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:se}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:B}]},{type:e,value:" html "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,Se]},children:[{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'<style>html,body{width:800px;word-break:break-all;}body{margin:0 10px;}img{max-width:680px;}</style><div id="menu"><style>#menu a{font-weight:bold;text-decoration:none;}#menu span{font-size: 14px;color:silver;}</style><h3>目录</h3>'}]},{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,d,X]},children:[{type:e,value:ge}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:$}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:Y},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:e,value:Ee},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:ae}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:" i"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:pe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:L}]},{type:e,value:h},{type:a,tag:p,props:{className:[t,d]},children:[{type:e,value:F}]},{type:e,value:" num "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:g}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+"}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"1"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Fe}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:"\n    html "},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+="}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,Se]},children:[{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'<p><a href="#'}]},{type:a,tag:p,props:{className:[t,ye]},children:[{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:re}]},{type:e,value:"num"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:Le}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:a,tag:p,props:{className:[t,w]},children:[{type:e,value:"3"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:_}]},{type:e,value:r},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"'0'"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:D}]}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'" target="_self">'}]},{type:a,tag:p,props:{className:[t,ye]},children:[{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:re}]},{type:e,value:se},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"title"}]},{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:D}]}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"</a><br><span>"}]},{type:a,tag:p,props:{className:[t,ye]},children:[{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:re}]},{type:e,value:se},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:S}]},{type:e,value:Q},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:k}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,v]},children:[{type:e,value:"time"}]},{type:a,tag:p,props:{className:[t,j,l]},children:[{type:e,value:D}]}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:"</span></p>"}]},{type:a,tag:p,props:{className:[t,W,o]},children:[{type:e,value:"`"}]}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:c}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:D}]},{type:e,value:"\nhtml"},{type:a,tag:p,props:{className:[t,y]},children:[{type:e,value:"+="}]},{type:a,tag:p,props:{className:[t,o]},children:[{type:e,value:'"</div>"'}]},{type:e,value:s},{type:a,tag:p,props:{className:[t,G,K]},children:[{type:e,value:G}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:u}]},{type:a,tag:p,props:{className:[t,N,m,v]},children:[{type:e,value:"log"}]},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:i}]},{type:e,value:"html"},{type:a,tag:p,props:{className:[t,l]},children:[{type:e,value:n}]},{type:e,value:s}]}]}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"复制生成的html，手动粘贴到body的开头。"}]},{type:e,value:s},{type:a,tag:I,props:{id:Ue},children:[{type:a,tag:T,props:{ariaHidden:C,href:"#%E4%BF%9D%E5%AD%98%E6%95%B4%E4%B8%AA%E9%A1%B5%E9%9D%A2%E4%B8%BApdf",tabIndex:U},children:[{type:a,tag:p,props:{className:[R,H]},children:[]}]},{type:e,value:Re}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"使用浏览器自带的“打印到PDF”功能，我们可以保存整页为PDF，完成。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"经过测试，文章数量多，且包含的图片多的时候，打印预览窗口弹出的速度会比较慢，等一等就可以了。"}]},{type:e,value:s},{type:a,tag:A,props:{},children:[{type:e,value:"全文完。"}]}]},dir:"/blog",path:"/blog/2024-02-18-tampermonkey-browser-script-download-sina-blog",extension:".md",createdAt:Ge,updatedAt:Ge,prev:{slug:"fengshen-trilogy-part-1-synopsis",description:"A new adaption of the novel The Investiture of the Gods, read the part one full story here.",title:"Creation of the Gods I: Kingdom of Storms, full story"},next:ze,relatedBlog:[{slug:"house-wife",description:"资助8年的女孩做全职主妇，你什么想法？啥时候男人都抢着当主夫了，我就赞成女人做主妇。",date:"2023-03-06T00:00:00.000Z",language:ee,title:"关于“全职主妇”",categories:["时评"],tags:["家庭主妇"]},{slug:"gololyod",description:"2019年的冬天，到底有什么特别呢",date:"2023-09-20T00:00:00.000Z",language:ee,title:"听了柳拜的《雾凇》，真好听啊",categories:["乐评"],tags:["柳拜","俄国音乐"]},{slug:"lighten-nuxt-website",description:"Nuxt默认会将所有vue文件使用的模块打包进最后的网站文件，所以最好不要在博客页渲染Markdown",date:"2019-05-18T00:00:00.000Z",language:ee,title:"如何减轻Nuxt打包生成的代码量",categories:["技术"],tags:["我的项目","Nuxt.js"]},{slug:"gintama-shigeshige-and-tokugawa-iemochi",description:"戏说不是胡说，茂茂不是家茂，真实的人生没有那么搞笑。",date:"2022-01-25T00:00:00.000Z",language:ee,title:"研究了一下《银魂》的茂茂将军，感叹一下无常的人生",categories:["剧评"],tags:["银魂","笃姬"]}]},mySlug:je,keywords:Ie,profile_pic:void 0,ui_zh:{related_posts:"相关文章",loadComment:"加载评论"},ui_en:{related_posts:"Related Posts",loadComment:"Load Comments"}}],fetch:[],error:ze,state:{lang:{val:"Eng"}},serverRendered:!0,routePath:"/blog/tampermonkey-browser-script-download-sina-blog",content:{dbHash:"949d7d59"}}}("text","element","span","token","punctuation","\n","operator"," ",";",".","property-access","(",")","string","keyword","=","\n    ","function","method","comment","p","var","code","dom","variable","number","}","[","]",",","let","{","interpolation-punctuation","h2","a","true",-1,"icon","icon-link","div","nuxt-content-highlight","pre","line-numbers",":","console","language-js","document","control-flow","class-name"," i ","0","i","localStorage","template-punctuation","中文","length","++","querySelector","innerHTML","list","interpolation","${","设置下载文件夹，关闭浏览器询问","遍历文章列表，下载每一篇文章","合并文章为一个txt文件","复制html到浏览器，替换图片链接","给文章标题添加id","给整个页面添加博客目录功能区","querySelectorAll","for","known-class-name","JSON","curArticleNum"," list","\narticleJSON ","setItem",'"articleJSON"',"articleJSON",'"curArticleNum"',"\n\n","getItem","template-string","const","\n    aTag","toString","padStart","tampermonkey-browser-script-download-sina-blog",Array(1),"获取文章列表，存入localstorage","获取文章列表，存入localStorage","保存整个页面为pdf","保存整个页面为PDF","stringify"," articleJSON "," articleJSON"," articleList","constant"," allImg","2024-02-18T17:16:50.774Z",null)</script><script src="/_nuxt/7e4b94164e32f472bd4c.js" defer></script><script src="/_nuxt/efceef13af374f2d770e.js" defer></script><script src="/_nuxt/54f6f6bd48b75643c87d.js" defer></script><script src="/_nuxt/43e415fec2b60ff3aa38.js" defer></script><script src="/_nuxt/8df581cb8a5ae31cb7f4.js" defer></script>
  </body>
</html>
