<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>How to build up a static blog website with Nuxt | Jenny的小站</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="I built up my website with Nuxt. First I created an API to parse Markdown articles and return JSON contents, and then used Nuxt+Axios to call this API to retrieve blog article and generate static pages based on this structure. Here you can see some details."><meta data-n-head="ssr" data-hid="keyword" name="keyword" content="English, JavaScript, Nuxt, Static Blog, Tech"><link data-n-head="ssr" rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="/css/font-gugi.css"><link data-n-head="ssr" rel="stylesheet" href="/css/font-poppins.css"><link data-n-head="ssr" rel="stylesheet" href="/css/style.css?2020-04-12"><link data-n-head="ssr" rel="stylesheet" href="/font-awesome/css/font-awesome.min.css"><link data-n-head="ssr" rel="stylesheet" href="/css/github-markdown.min.css"><link data-n-head="ssr" rel="stylesheet" href="/css/hljs.dark.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://hzn-website.000webhostapp.com/disqus/dist/iDisqus.min.css"><script data-n-head="ssr" src="/js/statcounter.js"></script><script data-n-head="ssr" data-ad-client="ca-pub-2790001673900763" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><base href="/"><link rel="preload" href="/_nuxt/701d42540a3278d1c670.js" as="script"><link rel="preload" href="/_nuxt/0432c1a2dd8b48d52e80.js" as="script"><link rel="preload" href="/_nuxt/93ea4c7e1b994d5e57f3.js" as="script"><link rel="preload" href="/_nuxt/609b5e2e1685436671e4.js" as="script"><style data-vue-ssr-id="3191d5ad:0 72520070:0 f28bdea2:0">.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#3b8070;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.markdown-body{margin-bottom:50px}.markdown-body img{max-height:100px}a[id]{position:relative;top:-40px;display:block}a#comment-link{top:0}.blog-desc{margin:10px;padding:10px;color:#666;background-color:rgba(0,0,0,.025)}.youtube-img{position:relative;display:inline-block}.youtube-img:before{width:40%;height:40%;border-radius:25%;background:rgba(0,0,0,.7);transition:background .2s}.youtube-img:after,.youtube-img:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}.youtube-img:after{width:0;height:0;border-top:10px solid transparent;border-left:20px solid #fff;border-bottom:10px solid transparent}.youtube-img:hover:before{background:red}#disqus_thread{margin-top:20px}.prev-next{margin:20px auto;display:block}.prev-next:after{display:table;content:" ";clear:both}.prev-next a{display:inline}.next,.prev{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:20px auto;width:100%;color:grey;border:1px solid grey;cursor:pointer}.prev{width:48%;text-align:left;float:left}.next{width:48%;text-align:right;float:right}.next:hover,.prev:hover{color:#000;border-color:#000}.prev p{padding-left:16px}.next p,.prev p{margin:0;padding-top:16px;padding-bottom:16px}.next p{padding-right:16px}#comment{margin-top:40px}.blog-gallery{margin:20px auto;display:flex;justify-content:center;flex-wrap:wrap;overflow:hidden}.blog-gallery-unit{margin:40px 20px 0;width:46%;border:1px solid silver;border-radius:5px}.blog-gallery-unit:first-child,.blog-gallery-unit:nth-child(2){margin-top:20px}.blog-gallery-unit:nth-child(2n-1){margin-left:0}.blog-gallery-unit:nth-child(2n){margin-right:0}.blog-gallery-unit:hover{border-color:#000}.blog-gallery-inner{padding:21px 10px 10px;height:100%}.blog-gallery-inner h4{margin-top:0;max-height:42px;overflow:hidden}.blog-gallery-desc{line-height:21px;max-height:64px;display:block;overflow:hidden}.blog-gallery-tag{margin:1px;padding:0 8px;color:#fff;font-size:12px;font-family:Microsoft Yahei;line-height:20px;border-radius:999px;background:grey;display:inline-block}@media (max-width:425px){.blog-gallery-unit{margin:20px 0 0;width:100%}}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="container"><nav><div class="nav-wrap"><header><a href="/" class="no-decor-link"><p class="nav-home">Jenny's blog</p></a></header> <div class="nav-btn"><div class="bar"></div> <div class="bar"></div> <div class="bar"></div> <div class="bar"></div></div> <div class="nav-mask"></div> <div class="body-mask"></div> <ul class="nav-ul"><span title="Change navigation to English" class="nav-link" style="padding-left:10px">English</span> <a href="/" target="_self" class="nav-link"><li>首页<!----><!----></li></a><a href="/resume" target="_self" class="nav-link"><li>简历<!----><!----></li></a><a href="/portfolio" target="_self" class="nav-link"><li>作品集<!----><!----></li></a><a href="/blog" target="_self" class="nav-link nuxt-link-active"><li>博客<!----><!----></li></a><a href="https://wj.qq.com/s2/3731207/f0cd/" target="_blank" class="nav-link"><li>联系我<span> </span><i class="fa fa-external-link"></i></li></a></ul></div></nav> <main><div><section class="main-content"><h1 class="align-center article-title">How to build up a static blog website with Nuxt</h1> <p class="blog-date align-center"><span class="fa fa-calendar"> 2020-04-05</span></p> <p class="blog-tags align-center"><a href="/blog/tag/English"><span class="blog-tag">English</span></a><a href="/blog/tag/JavaScript"><span class="blog-tag">JavaScript</span></a><a href="/blog/tag/Nuxt"><span class="blog-tag">Nuxt</span></a><a href="/blog/tag/Static Blog"><span class="blog-tag">Static Blog</span></a><a href="/blog/tag/Tech"><span class="blog-tag">Tech</span></a></p> <div class="blog-desc">I built up my website with Nuxt. First I created an API to parse Markdown articles and return JSON contents, and then used Nuxt+Axios to call this API to retrieve blog article and generate static pages based on this structure. Here you can see some details.</div> <article class="markdown-body"><p></p><h3> </h3><ul><li><a href="blog/nuxt-blog-static-website-en#Preface_1">Preface</a></li><li><a href="blog/nuxt-blog-static-website-en#About_Nuxt_7">About Nuxt</a></li><li><a href="blog/nuxt-blog-static-website-en#What_functions_do_I_need_for_my_website_17">What functions do I need for my website？</a></li><li><a href="blog/nuxt-blog-static-website-en#What_skills_do_I_need_Are_there_some_good_learning_materials_online_29">What skills do I need? Are there some good learning materials online?</a></li><ul><li><a href="blog/nuxt-blog-static-website-en#Youtube_videos_37">Youtube videos</a></li><li><a href="blog/nuxt-blog-static-website-en#Article_tutorials_onlineJapanese_and_English_59">Article tutorials online(Japanese and English)</a></li></ul><li><a href="blog/nuxt-blog-static-website-en#The_structure_of_my_website_77">The structure of my website</a></li><li><a href="blog/nuxt-blog-static-website-en#API_that_serves_as_CMS_121">API that serves as CMS</a></li><ul><li><a href="blog/nuxt-blog-static-website-en#New_way_to_write_Markdown_file_125">New way to write Markdown file</a></li><li><a href="blog/nuxt-blog-static-website-en#To_read_according_to_parameters_and_return_data_when_the_API_is_called_147">To read according to parameters and return data when the API is called</a></li></ul><li><a href="blog/nuxt-blog-static-website-en#Retrieve_data_from_API_and_render_it_to_webpage_153">Retrieve data from API and render it to webpage</a></li><li><a href="blog/nuxt-blog-static-website-en#Generate_static_website_230">Generate static website</a></li><li><a href="blog/nuxt-blog-static-website-en#Some_other_points_to_notice_271">Some other points to notice</a></li><ul><li><a href="blog/nuxt-blog-static-website-en#Routes_and_links_273">Routes and links</a></li><li><a href="blog/nuxt-blog-static-website-en#Root_path_281">Root path</a></li></ul><li><a href="blog/nuxt-blog-static-website-en#Experience_from_this_293">Experience from this</a></li></ul><p></p>
<h1><a id="Preface_1"></a>Preface</h1>
<p>This is a translation of original <a href="/blog/nuxt-blog-static-website">Chinese article</a></p>
<p>I used Jekyll for my website between March 17 2018 to May 5 2019, the original theme was Hydejack. From May 6 2019, I redesigned my website with Nuxt, this article will talk about the process of making this website and some points to notice.</p>
<h1><a id="About_Nuxt_7"></a>About Nuxt</h1>
<p><a href="https://nuxtjs.org/guide/">Here</a> is the official website of Nuxt for your reference.</p>
<blockquote>
<p>Nuxt is a progressive framework based on Vue.js to create modern web applications. It is based on Vue.js official libraries (vue, vue-router and vuex) and powerful development tools (webpack, Babel and PostCSS).</p>
</blockquote>
<p>So if you have a Node server, you can use Nuxt to build up a dynamic website.</p>
<p>Or you can use Nuxt to generate static pages and upload webpage files to static web hosting service like <em>Github pages</em>, then your website will be up and running, just like mine.</p>
<h1><a id="What_functions_do_I_need_for_my_website_17"></a>What functions do I need for my website？</h1>
<p>After researching on other static website generators like <code>Jekyll</code>, <code>Hexo</code> and <code>Hugo</code>, I want to have the functions that they have for my website.</p>
<p>As a personal website, being able to show personal blogs is the basic one, then it should have pages like these:</p>
<ul>
<li>Blog article list page</li>
<li>Blog article detail page (article contents, previous page button, next page button, related articles)</li>
<li>Tag list page</li>
<li>Blog article list page under certain tag</li>
</ul>
<p>Then maybe some individual pages like my resume and contact page, and I want my homepage to recommend latest blog articles, and this block should have article title, date, tags and short descriptions.</p>
<h1><a id="What_skills_do_I_need_Are_there_some_good_learning_materials_online_29"></a>What skills do I need? Are there some good learning materials online?</h1>
<p>The "must have" prerequisites are <code>Node</code>, <code>Vue</code> and <code>NPM</code>, please make sure you know these before getting on with Nuxt. While designing website UI is much more personal and serves only my taste. I used external CSS to render Markdown article, but everything else was designed by myself.</p>
<p>This article will not talk about basic knowledge on Vue templates, including rendering data and page-viewer interaction.</p>
<p>Then let's go to the learning materials for Nuxt.</p>
<h2><a id="Youtube_videos_37"></a>Youtube videos</h2>
<p>Although I found a lot of tutorial videos on <a href="https://www.youtube.com">Youtube</a>, there are only a few videos that I watched in full length and considered useful.</p>
<ol>
<li>
<p>Nuxt.js - Static Site Generator<br>
<a href="https://www.youtube.com/watch?v=pI2qHPI0ZpU" title="Nuxt.js - Static Site Generator"><img src="/img/blog/2019-05-05/youtube05.jpg" alt="youtube-img"></a><br>
This video talked about making all of your pages with <code>.vue</code> files and generate a static website with these files. This is suitable for those websites that don't need much revision, like company websites. But since we are making a blog website, it does not seem smart to write every blog article with <code>.vue</code> file, and you might still need some revision in near future, so it's better if we do not make our website directly based on this video.</p>
</li>
<li>
<p>Nuxt.js & <a href="https://www.storyblok.com/">Storyblok</a> - Building a Complete Blog<br>
<a href="https://www.youtube.com/watch?v=Dc_5BpIB4X4" title="The Front-End | Nuxt.js & Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube01.jpg" alt="youtube-img"></a>
<a href="https://www.youtube.com/watch?v=UIh4P5rNjac" title="Adding Storyblok CMS | Nuxt.js & Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube02.jpg" alt="youtube-img"></a>
<a href="https://www.youtube.com/watch?v=Yq6Ddu_QAiY" title="Storyblok Live Preview! | Nuxt.js & Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube03.jpg" alt="youtube-img"></a>
<a href="https://www.youtube.com/watch?v=JHCKab2oS4s" title="Final Touches & Deploying the Blog | Nuxt.js & Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube04.jpg" alt="youtube-img"></a><br>
This series of video talked about using Nuxt to build up blog homepage(blog list page), individual pages, set up page navigation routes, then use <code>Axios</code> to retrieve article contents from an API and generate static blog site.<br>
The author used a CMS called <a href="https://www.storyblok.com/">storyblok</a> to host his blog articles here, the blog files are not directly saved on his computer, and neither is the content written in Markdown. Aside from <a href="https://www.storyblok.com/">storyblok</a>, there are other CMS with APIs like <a href="https://www.contentful.com/">contentful</a> and <a href="https://www.sanity.io">sanity</a> that can do the same.<br>
For someone like me, I was used to Jekyll style, and still want to write articles in Markdown. But the concept of "using an API from a CMS" is interesting enough to me, what if I do not use an external CMS, but rather build up a similar service on my computer? If only I have an API that provides article contents, I can generate static website just as the video author.</p>
</li>
<li>
<p>Why You Should Learn Server Middleware with Nuxt.js! A step-by-step tutorial!<br>
<a href="https://www.youtube.com/watch?v=j-3RwvWZoaU" title="Why You Should Learn Server Middleware with Nuxt.js! A step-by-step tutorial!"><img src="/img/blog/2019-05-05/youtube06.jpg" alt="youtube-img"></a><br>
This video teaches how to build up an API with <code>serverMiddleware</code> in Nuxt when you are serving Nuxt dynamically, the author has shown detailed API codes in the video. If I am going to make a dynamic website, I can use this API to parse Markdown files and return article contents, then my website is ready to go online.<br>
Since I want to build a static website, I will not need a serverMiddleware here, but the server side API codes are very useful to me. Let's put aside the serverMiddleware, and use the API alone to parse Markdown files and return JSON contents, then I will have my own CMS now.</p>
</li>
</ol>
<h2><a id="Article_tutorials_onlineJapanese_and_English_59"></a>Article tutorials online(Japanese and English)</h2>
<p>There are article tutorials in Chinese, but I might learn more from English and Japanese articles. (I studied Japanese at university.)</p>
<ol>
<li>
<p><a href="https://marinaaisa.com/blog/blog-using-vue-nuxt-markdown">Website with blog and portfolio using Vue.js + Nuxt + Markdown(English)</a></p>
<p>The author of this article successfully parsed Markdown and generate files with Nuxt alone, and you will need to <strong>manually</strong> create a JS file and input article titles and links in there, and update this file <strong>each time</strong> you add a new article. But I want my website to <strong>automatically</strong> recognize newly added articles, so her methods might not be suitable for me.</p>
<p>She is generous enough to post her entire source code of the website on Github, you can view the repository <a href="https://github.com/marinaaisa/nuxt-markdown-blog-starter">here</a>.</p>
<p>Her design and layout is very much like a western website, neat, large spacing between elements, easy to know what the author wants to display. But the website does not have a tag system, it might be seen as a small shortcoming.</p>
</li>
<li>
<p><a href="https://blog.nakamu.life/posts/replace-tech-blog">Replacing tech blog with Nuxt(Japanese)</a></p>
<p>This is a useful article about building up websites using Nuxt in Japanese. His words are easy to understand, and the building process and technical points are explained very clearly. The author used a CMS service called <a href="https://www.contentful.com/">contentful</a>, similar to the previous Youtube video, and his UI design is well-organized, I like this too.</p>
<p>He built up his tech blog with Nuxt, the link is <a href="https://blog.nakamu.life">here</a>, and he also has a life blog built with Gatsby(a React framework), the link is <a href="https://enjoyhk.nakamu.life/">here</a>, the designs are also very good, but author hasn't updated any new articles in months.</p>
</li>
</ol>
<h1><a id="The_structure_of_my_website_77"></a>The structure of my website</h1>
<pre class="hljs"><code>myblog
├─ api/    ☆Please create this folder manually☆
│   ├─ blog/   Folder contains Markdown files to be parsed
│   │   ├─ 2020-04-05-set-up-static-blog-using-nuxt-en.md
│   │   ├─ 2017-05-28-hao123-issue.md
│   │   └─ ...
│   ├─ config.js configuration of API
│   ├─ app.html Backend UI entry point
│   └─ app.js The entry point to API, default path is http://127.0.0.1:4000
├─ components/
│   ├─ Footer.vue
│   └─ Navigation.vue
├─ dist/        ☆Static files generated by Nuxt, to be uploaded to Github☆
├─ layouts/
│   ├─ default.vue
│   ├─ error.vue If dynamic, 404 page will be this, if static, 404 page will be Github 404 page
│   ├─ home.vue Layout for homepage
│   └─ page.vue Layout for other pages
├─ pages/
│   ├─ blog/
│   │   ├─ tag/
│   │   │   ├─ _tag.vue  to render article list under certain tag dynamically
│   │   │   │            eg => /blog/tag/aaa.html
│   │   │   └─ index.vue to render tag list dynamically => /blog/tag.html
│   │   ├─ _slug.vue to render article detail page dynamically
│   │   │                 eg => /blog/nuxt-blog-static-website-en.html
│   │   └─ index.vue to render article list dynamically => /blog.html
│   ├─ resume.vue
│   └─ index.vue     entry point of website => /index.html
├─ static/
│   ├─ img/  refer to file as this: /img/home/bg.jpg
│   │   └─ home
│   │       └─ bg.jpg
│   ├─ js/  refer to file as this: /js/jquery.js
│   │   └─ jquery.js
│   ├─ favicon.ico  website icon => /favicon.ico
│   └─ styles.css   universal css => /styles.css
├─ nuxt.config.js  nuxt website settings
└─ ...
</code></pre>
<h1><a id="API_that_serves_as_CMS_121"></a>API that serves as CMS</h1>
<p>I have released this CMS in a new repo, please see <a href="https://github.com/c53hzn/april-cms">https://github.com/c53hzn/april-cms</a>.</p>
<h2><a id="New_way_to_write_Markdown_file_125"></a>New way to write Markdown file</h2>
<p>Basically it's the same as the way you write Markdown files for Jekyll, but I added an attribute called <code>related_blog</code> to show "related blogs" for certain blog articles, you can write the file name without extension.</p>
<pre class="hljs"><code>---
layout: post
title: How to build up a static blog website with Nuxt
description: I built up my website with Nuxt. Basically I just created an API to parse Markdown articles and return JSON contents, and used Nuxt+Axios to call this API to retrieve blog article and generate static pages based on this structure.
tags: [English,Nuxt,Static Blog]
comments: true
related_blog: [nuxt-blog-static-website-en]
---
# Header 1

asdf

# Header 2

asdf
</code></pre>
<h2><a id="To_read_according_to_parameters_and_return_data_when_the_API_is_called_147"></a>To read according to parameters and return data when the API is called</h2>
<p>With this API, I transformed Markdown contents into HTML, this will reduce the size of the static website generated.</p>
<p>For the core codes of API, you can refer to <a href="/blog/editor-for-my-cms-of-my-nuxt-blog-en">Write a control panel for my API-based CMS for Nuxt</a>.</p>
<h1><a id="Retrieve_data_from_API_and_render_it_to_webpage_153"></a>Retrieve data from API and render it to webpage</h1>
<p>We can first go to the <code>api</code> folder, then open <code>cmd</code> console under this folder, run command <code>node app.js</code> to open the API, then go to upper folder, open a second <code>cmd</code> console, run command <code>npm run dev</code>, then your Nuxt server is running in <code>dev</code> mode on your computer.</p>
<p>In this mode, all changes in Nuxt files will be reflected to local server instantly, it is very convenient for constructing websites.</p>
<p>Because pages like blog article need to be served dynamically, we have to use files starting with underscore like <code>_slug.vue</code> to achieve this. For real page viewing, you can use <code>/blog/nuxt-blog-static-website-en</code> to view contents of this page, and <code>/blog/nuxt-blog-static-website-en</code> is the dynamic parameter <code>slug</code>, you can use this parameter in <code>Axios</code> requests, with format as <code>context.params.slug</code>. Similar methods apply to tag list and tag detail pages.</p>
<p>To render data, you need to use <code>asyncData</code> method, here is how to render blog list in <code>/blog/index.vue</code> page.</p>
<p>Remember to <code>import axios from 'axios'</code> first, then</p>
<pre class="hljs"><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">layout</span>: <span class="hljs-string">"default"</span>,
  asyncData(context) {
    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">'http://127.0.0.1:4000/blogs'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =></span> {
      <span class="hljs-keyword">return</span> { 
        <span class="hljs-attr">blogs</span>: res.data.blogs,
        <span class="hljs-attr">baseURL</span>: context.app.router.options.base
      };
    })
  }
</code></pre>
<p>And you will use <code>asyncData</code> method to render blog article detail in <code>/blog/_slug.vue</code> too</p>
<pre class="hljs"><code class="language-javascript">asyncData(context) {
  <span class="hljs-keyword">const</span> mySlug = context.params.slug;
  <span class="hljs-keyword">const</span> isDev = context.isDev;
  <span class="hljs-keyword">var</span> config = {<span class="hljs-string">"isSlugUseDate"</span>:<span class="hljs-literal">true</span>};
  <span class="hljs-keyword">var</span> result = {
    <span class="hljs-attr">relatedBlog</span>: [],
    <span class="hljs-attr">baseURL</span>: context.app.router.options.base,
  };
  <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">'http://127.0.0.1:4000/config'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=></span>{
    config = res.data;
    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">'http://127.0.0.1:4000/blog?slug='</span>+mySlug+<span class="hljs-string">"&isdev="</span>+isDev);
  }).then(<span class="hljs-function"><span class="hljs-params">res</span>=></span>{
    result.blog = res.data;
    result.tags = res.data.tags || [<span class="hljs-string">"none"</span>];
    result.date = res.data.date;
    <span class="hljs-keyword">var</span> related = res.data.related_blog;
    <span class="hljs-keyword">var</span> requests = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; related.length; i++) {
      <span class="hljs-keyword">if</span> (related[i]) {
        <span class="hljs-keyword">if</span> (!config.isSlugUseDate) {
          related[i] = related[i].substring(<span class="hljs-number">11</span>,related[i].length);
          <span class="hljs-keyword">let</span> req = axios.get(<span class="hljs-string">'http://127.0.0.1:4000/blog?slug='</span>+related[i])
          .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> {<span class="hljs-comment">// res.data is json</span>
            <span class="hljs-keyword">let</span> temp = res.data;
            <span class="hljs-keyword">if</span> (temp) {
              <span class="hljs-keyword">delete</span> res.data.content;
              <span class="hljs-keyword">return</span> res.data;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> {};
            }
          });
          requests.push(req);
        }
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(requests);
  }).then(<span class="hljs-function"><span class="hljs-params">res</span>=></span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.length; i++) {
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.stringify(res[i])!=<span class="hljs-string">"{}"</span>) {
        result.relatedBlog.push(res[i]);
      }
    }
    <span class="hljs-keyword">return</span> result;
  });
}
</code></pre>
<p>Similar methods apply to tag list and tag detail pages.</p>
<h1><a id="Generate_static_website_230"></a>Generate static website</h1>
<p>The command for generating static pages is <code>npm run generate</code>, and please remember to leave the API open for the entire generation process, or Nuxt will not be able to retrieve data.</p>
<p>But Nuxt will only generate static files for those <code>.vue</code> files not starting with underscore under <code>pages</code> folder. It is to say that Nuxt will not generate static files for dynamic pages like <code>_slug.vue</code> and <code>_tag.vue</code>. If you wish to generate static pages for them, please set the right <code>routes</code> in file <code>nuxt.config.js</code>.</p>
<p>Also Nuxt will generate folder for each <code>.vue</code> file, and generate <code>index.html</code> under this folder by default, so this article will be able to be viewed with <code>/blog/nuxt-blog-static-website-en/</code> and also <code>/blog/nuxt-blog-static-website-en/index.html</code>, but think of the amount of folders, let's just set it to <code>false</code>.</p>
<p>Here is my setting for <code>generate</code> in file <code>nuxt.config.js</code>.</p>
<pre class="hljs"><code class="language-javascript">generate: {
  <span class="hljs-attr">subFolders</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//if true, each page or post will have their own folder</span>
  routes: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> blogs = axios.get(<span class="hljs-string">'http://127.0.0.1:4000'</span>)
    .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> {<span class="hljs-comment">// res.data is array</span>
      <span class="hljs-keyword">return</span> res.data.blogs.map(<span class="hljs-function">(<span class="hljs-params">blog</span>) =></span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">route</span>: <span class="hljs-string">'/blog/'</span> + blog.slug,
          <span class="hljs-attr">payload</span>: blog
        }
      })
    })
    <span class="hljs-keyword">let</span> tags = axios.get(<span class="hljs-string">'http://127.0.0.1:4000?tag=all_tags'</span>)
    .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =></span> {<span class="hljs-comment">// res.data is object</span>
      <span class="hljs-keyword">let</span> tags = <span class="hljs-built_in">Object</span>.keys(res.data.tags);
      <span class="hljs-keyword">return</span> tags.map(<span class="hljs-function">(<span class="hljs-params">tag</span>) =></span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">route</span>: <span class="hljs-string">'/blog/tag/'</span> + tag,
          <span class="hljs-attr">payload</span>: tag
        };
      });
    })
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([blogs, tags]).then(<span class="hljs-function"><span class="hljs-params">values</span> =></span> {
      <span class="hljs-keyword">return</span> [...values[<span class="hljs-number">0</span>], ...values[<span class="hljs-number">1</span>]]
    })
  },
  ...
}
</code></pre>
<h1><a id="Some_other_points_to_notice_271"></a>Some other points to notice</h1>
<h2><a id="Routes_and_links_273"></a>Routes and links</h2>
<p>The internal links within website like navigation links should be using <code>&lt;nuxt-link/></code> tag, it's favorable to access speed because of Nuxt's routing system.</p>
<p>But when served on static server, the page will still send HTTP request to <code>127.0.0.1:4000</code> and return "Network error" when request failed, because the API is closed now.</p>
<p>It seems difficult to solve this issue if I am to keep those <code>&lt;nuxt-link/></code> tags and have the pages render right contents for static mode, so I changed all <code>&lt;nuxt-link/></code> tags to <code>&lt;a>&lt;/a></code> tags, then the static website is functioning well now.</p>
<h2><a id="Root_path_281"></a>Root path</h2>
<p>If your website is not in the root path of your server, but is rather like <code>xxx.github.io/myproject</code>, and if you are using relative links in your website, those links might be pointing to wrong paths. You might need to set your base folder name in <code>nuxt.config.js</code> like this</p>
<pre class="hljs"><code class="language-javascript">router: {
  <span class="hljs-attr">base</span>: <span class="hljs-regexp">/myproject/</span>
}
</code></pre>
<p>Then the links should be right links no matter your website is dynamic or static.</p>
<h1><a id="Experience_from_this_293"></a>Experience from this</h1>
<p>I spent about 2 weeks to give my blog site a new look, and discovered amazing contents on Youtube during this process. You really can find any tutorial video on Youtube.</p>
<p>And the auto-generated subtitles by Youtube are very useful and also pretty accurate. Youtube can recognize all kinds of accent from all over the world, although the subtitles and speakers' words are not 100% match, I can still understand most part of the videos.</p>
<p>Recently(2020-04-05) I have been making tutorial videos for my company and upload them to Youtube, and Youtube subtitles can recognize around 99% of my narration, I'm really impressed.</p>
<p>Youtube deserves a thumb up here!</p>
</article> <div class="prev-next"><a href="/blog/tv-drama-die-now" class="no-decor-link"><div class="prev"><p>上一篇</p></div></a> <a href="/blog/script-for-photoshop-bulk-resize-and-watermark" class="no-decor-link"><div class="next"><p>下一篇</p></div></a></div> <div><h3 style="text-align:center"><span style="border-bottom:2px solid #000">相关文章</span></h3> <div class="blog-gallery"><div class="blog-gallery-unit"><a href="/blog/nuxt-blog-static-website" title="重构了一下博客，从Jekyll迁移到了Nuxt。方法是先用Node API 来解析 Markdown 文件，然后 Nuxt+Axios 获取 API 返回的文章内容并生成静态页面。" class="no-decor-link"><div class="blog-gallery-inner align-left"><h4>如何使用Nuxt建立个人博客</h4> <p class="blog-date"><span class="fa fa-calendar">
               2019-05-05
            </span></p> <p class="align-left"><span class="blog-gallery-desc">重构了一下博客，从Jekyll迁移到了Nuxt。方法是先用Node API 来解析 Markdown 文件，然后 Nuxt+Axios 获取 API 返回的文章内容并生成静态页面。</span> <br> <span class="align-left"><span class="blog-gallery-tag">
                我的项目
              </span><span class="blog-gallery-tag">
                JavaScript
              </span><span class="blog-gallery-tag">
                Nuxt
              </span><span class="blog-gallery-tag">
                静态博客
              </span><span class="blog-gallery-tag">
                技术
              </span></span></p></div></a></div></div></div> <div id="comment"></div></section></div></main> <footer><p>Created with Nuxt.js <br>
    	Designed by  
    	<a href="https://github.com/c53hzn" target="_blank" class="no-decor-link"><strong>Jenny HOU</strong> <i class="fa fa-github font-20"></i></a></p> <div class="go-top go-top-hidden"><div class="arrow"></div> <div class="stick"></div></div></footer></div></div></div><script>window.__NUXT__=function(e,t,s,a,n,o,i){return n[0]=o,n[1]=t,n[2]=s,n[3]="Static Blog",n[4]="Tech",{layout:"page",data:[{relatedBlog:[{layout:e,title:"如何使用Nuxt建立个人博客",description:"重构了一下博客，从Jekyll迁移到了Nuxt。方法是先用Node API 来解析 Markdown 文件，然后 Nuxt+Axios 获取 API 返回的文章内容并生成静态页面。",tags:["我的项目",t,s,"静态博客","技术"],comments:!0,related_blog:["2020-04-19-editor-for-my-cms-of-my-nuxt-blog","2019-05-18-lighten-nuxt-website","2018-03-28-jekyll-blog-static-website"],slug:a,date:"2019-05-05",prev:"memories-of-the-alhambra-n-feel-good-to-die",next:"lighten-nuxt-website"}],baseURL:"/",ui_str_zh:{to_prev:"上一篇",to_next:"下一篇",related_posts:"相关文章"},ui_str_en:{to_prev:"Previous",to_next:"Next",related_posts:"Related Posts"},blog:{layout:e,title:"How to build up a static blog website with Nuxt",description:"I built up my website with Nuxt. First I created an API to parse Markdown articles and return JSON contents, and then used Nuxt+Axios to call this API to retrieve blog article and generate static pages based on this structure. Here you can see some details.",tags:n,comments:!0,related_blog:[a],slug:"nuxt-blog-static-website-en",date:i,content:'<p><h3> </h3><ul><li><a href="#Preface_1">Preface</a></li><li><a href="#About_Nuxt_7">About Nuxt</a></li><li><a href="#What_functions_do_I_need_for_my_website_17">What functions do I need for my website？</a></li><li><a href="#What_skills_do_I_need_Are_there_some_good_learning_materials_online_29">What skills do I need? Are there some good learning materials online?</a></li><ul><li><a href="#Youtube_videos_37">Youtube videos</a></li><li><a href="#Article_tutorials_onlineJapanese_and_English_59">Article tutorials online(Japanese and English)</a></li></ul><li><a href="#The_structure_of_my_website_77">The structure of my website</a></li><li><a href="#API_that_serves_as_CMS_121">API that serves as CMS</a></li><ul><li><a href="#New_way_to_write_Markdown_file_125">New way to write Markdown file</a></li><li><a href="#To_read_according_to_parameters_and_return_data_when_the_API_is_called_147">To read according to parameters and return data when the API is called</a></li></ul><li><a href="#Retrieve_data_from_API_and_render_it_to_webpage_153">Retrieve data from API and render it to webpage</a></li><li><a href="#Generate_static_website_230">Generate static website</a></li><li><a href="#Some_other_points_to_notice_271">Some other points to notice</a></li><ul><li><a href="#Routes_and_links_273">Routes and links</a></li><li><a href="#Root_path_281">Root path</a></li></ul><li><a href="#Experience_from_this_293">Experience from this</a></li></ul></p>\n<h1><a id="Preface_1"></a>Preface</h1>\n<p>This is a translation of original <a href="/blog/nuxt-blog-static-website">Chinese article</a></p>\n<p>I used Jekyll for my website between March 17 2018 to May 5 2019, the original theme was Hydejack. From May 6 2019, I redesigned my website with Nuxt, this article will talk about the process of making this website and some points to notice.</p>\n<h1><a id="About_Nuxt_7"></a>About Nuxt</h1>\n<p><a href="https://nuxtjs.org/guide/">Here</a> is the official website of Nuxt for your reference.</p>\n<blockquote>\n<p>Nuxt is a progressive framework based on Vue.js to create modern web applications. It is based on Vue.js official libraries (vue, vue-router and vuex) and powerful development tools (webpack, Babel and PostCSS).</p>\n</blockquote>\n<p>So if you have a Node server, you can use Nuxt to build up a dynamic website.</p>\n<p>Or you can use Nuxt to generate static pages and upload webpage files to static web hosting service like <em>Github pages</em>, then your website will be up and running, just like mine.</p>\n<h1><a id="What_functions_do_I_need_for_my_website_17"></a>What functions do I need for my website？</h1>\n<p>After researching on other static website generators like <code>Jekyll</code>, <code>Hexo</code> and <code>Hugo</code>, I want to have the functions that they have for my website.</p>\n<p>As a personal website, being able to show personal blogs is the basic one, then it should have pages like these:</p>\n<ul>\n<li>Blog article list page</li>\n<li>Blog article detail page (article contents, previous page button, next page button, related articles)</li>\n<li>Tag list page</li>\n<li>Blog article list page under certain tag</li>\n</ul>\n<p>Then maybe some individual pages like my resume and contact page, and I want my homepage to recommend latest blog articles, and this block should have article title, date, tags and short descriptions.</p>\n<h1><a id="What_skills_do_I_need_Are_there_some_good_learning_materials_online_29"></a>What skills do I need? Are there some good learning materials online?</h1>\n<p>The &quot;must have&quot; prerequisites are <code>Node</code>, <code>Vue</code> and <code>NPM</code>, please make sure you know these before getting on with Nuxt. While designing website UI is much more personal and serves only my taste. I used external CSS to render Markdown article, but everything else was designed by myself.</p>\n<p>This article will not talk about basic knowledge on Vue templates, including rendering data and page-viewer interaction.</p>\n<p>Then let\'s go to the learning materials for Nuxt.</p>\n<h2><a id="Youtube_videos_37"></a>Youtube videos</h2>\n<p>Although I found a lot of tutorial videos on <a href="https://www.youtube.com">Youtube</a>, there are only a few videos that I watched in full length and considered useful.</p>\n<ol>\n<li>\n<p>Nuxt.js - Static Site Generator<br>\n<a href="https://www.youtube.com/watch?v=pI2qHPI0ZpU" title="Nuxt.js - Static Site Generator"><img src="/img/blog/2019-05-05/youtube05.jpg" alt="youtube-img"></a><br>\nThis video talked about making all of your pages with <code>.vue</code> files and generate a static website with these files. This is suitable for those websites that don\'t need much revision, like company websites. But since we are making a blog website, it does not seem smart to write every blog article with <code>.vue</code> file, and you might still need some revision in near future, so it\'s better if we do not make our website directly based on this video.</p>\n</li>\n<li>\n<p>Nuxt.js &amp; <a href="https://www.storyblok.com/">Storyblok</a> - Building a Complete Blog<br>\n<a href="https://www.youtube.com/watch?v=Dc_5BpIB4X4" title="The Front-End | Nuxt.js &amp; Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube01.jpg" alt="youtube-img"></a>\n<a href="https://www.youtube.com/watch?v=UIh4P5rNjac" title="Adding Storyblok CMS | Nuxt.js &amp; Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube02.jpg" alt="youtube-img"></a>\n<a href="https://www.youtube.com/watch?v=Yq6Ddu_QAiY" title="Storyblok Live Preview! | Nuxt.js &amp; Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube03.jpg" alt="youtube-img"></a>\n<a href="https://www.youtube.com/watch?v=JHCKab2oS4s" title="Final Touches &amp; Deploying the Blog | Nuxt.js &amp; Storyblok - Building a Complete Blog"><img src="/img/blog/2019-05-05/youtube04.jpg" alt="youtube-img"></a><br>\nThis series of video talked about using Nuxt to build up blog homepage(blog list page), individual pages, set up page navigation routes, then use <code>Axios</code> to retrieve article contents from an API and generate static blog site.<br>\nThe author used a CMS called <a href="https://www.storyblok.com/">storyblok</a> to host his blog articles here, the blog files are not directly saved on his computer, and neither is the content written in Markdown. Aside from <a href="https://www.storyblok.com/">storyblok</a>, there are other CMS with APIs like <a href="https://www.contentful.com/">contentful</a> and <a href="https://www.sanity.io">sanity</a> that can do the same.<br>\nFor someone like me, I was used to Jekyll style, and still want to write articles in Markdown. But the concept of &quot;using an API from a CMS&quot; is interesting enough to me, what if I do not use an external CMS, but rather build up a similar service on my computer? If only I have an API that provides article contents, I can generate static website just as the video author.</p>\n</li>\n<li>\n<p>Why You Should Learn Server Middleware with Nuxt.js! A step-by-step tutorial!<br>\n<a href="https://www.youtube.com/watch?v=j-3RwvWZoaU" title="Why You Should Learn Server Middleware with Nuxt.js! A step-by-step tutorial!"><img src="/img/blog/2019-05-05/youtube06.jpg" alt="youtube-img"></a><br>\nThis video teaches how to build up an API with <code>serverMiddleware</code> in Nuxt when you are serving Nuxt dynamically, the author has shown detailed API codes in the video. If I am going to make a dynamic website, I can use this API to parse Markdown files and return article contents, then my website is ready to go online.<br>\nSince I want to build a static website, I will not need a serverMiddleware here, but the server side API codes are very useful to me. Let\'s put aside the serverMiddleware, and use the API alone to parse Markdown files and return JSON contents, then I will have my own CMS now.</p>\n</li>\n</ol>\n<h2><a id="Article_tutorials_onlineJapanese_and_English_59"></a>Article tutorials online(Japanese and English)</h2>\n<p>There are article tutorials in Chinese, but I might learn more from English and Japanese articles. (I studied Japanese at university.)</p>\n<ol>\n<li>\n<p><a href="https://marinaaisa.com/blog/blog-using-vue-nuxt-markdown">Website with blog and portfolio using Vue.js + Nuxt + Markdown(English)</a></p>\n<p>The author of this article successfully parsed Markdown and generate files with Nuxt alone, and you will need to <strong>manually</strong> create a JS file and input article titles and links in there, and update this file <strong>each time</strong> you add a new article. But I want my website to <strong>automatically</strong> recognize newly added articles, so her methods might not be suitable for me.</p>\n<p>She is generous enough to post her entire source code of the website on Github, you can view the repository <a href="https://github.com/marinaaisa/nuxt-markdown-blog-starter">here</a>.</p>\n<p>Her design and layout is very much like a western website, neat, large spacing between elements, easy to know what the author wants to display. But the website does not have a tag system, it might be seen as a small shortcoming.</p>\n</li>\n<li>\n<p><a href="https://blog.nakamu.life/posts/replace-tech-blog">Replacing tech blog with Nuxt(Japanese)</a></p>\n<p>This is a useful article about building up websites using Nuxt in Japanese. His words are easy to understand, and the building process and technical points are explained very clearly. The author used a CMS service called <a href="https://www.contentful.com/">contentful</a>, similar to the previous Youtube video, and his UI design is well-organized, I like this too.</p>\n<p>He built up his tech blog with Nuxt, the link is <a href="https://blog.nakamu.life">here</a>, and he also has a life blog built with Gatsby(a React framework), the link is <a href="https://enjoyhk.nakamu.life/">here</a>, the designs are also very good, but author hasn\'t updated any new articles in months.</p>\n</li>\n</ol>\n<h1><a id="The_structure_of_my_website_77"></a>The structure of my website</h1>\n<pre class=\'hljs\'><code>myblog\n├─ api/    ☆Please create this folder manually☆\n│   ├─ blog/   Folder contains Markdown files to be parsed\n│   │   ├─ 2020-04-05-set-up-static-blog-using-nuxt-en.md\n│   │   ├─ 2017-05-28-hao123-issue.md\n│   │   └─ ...\n│   ├─ config.js configuration of API\n│   ├─ app.html Backend UI entry point\n│   └─ app.js The entry point to API, default path is http://127.0.0.1:4000\n├─ components/\n│   ├─ Footer.vue\n│   └─ Navigation.vue\n├─ dist/        ☆Static files generated by Nuxt, to be uploaded to Github☆\n├─ layouts/\n│   ├─ default.vue\n│   ├─ error.vue If dynamic, 404 page will be this, if static, 404 page will be Github 404 page\n│   ├─ home.vue Layout for homepage\n│   └─ page.vue Layout for other pages\n├─ pages/\n│   ├─ blog/\n│   │   ├─ tag/\n│   │   │   ├─ _tag.vue  to render article list under certain tag dynamically\n│   │   │   │            eg =&gt; /blog/tag/aaa.html\n│   │   │   └─ index.vue to render tag list dynamically =&gt; /blog/tag.html\n│   │   ├─ _slug.vue to render article detail page dynamically\n│   │   │                 eg =&gt; /blog/nuxt-blog-static-website-en.html\n│   │   └─ index.vue to render article list dynamically =&gt; /blog.html\n│   ├─ resume.vue\n│   └─ index.vue     entry point of website =&gt; /index.html\n├─ static/\n│   ├─ img/  refer to file as this: /img/home/bg.jpg\n│   │   └─ home\n│   │       └─ bg.jpg\n│   ├─ js/  refer to file as this: /js/jquery.js\n│   │   └─ jquery.js\n│   ├─ favicon.ico  website icon =&gt; /favicon.ico\n│   └─ styles.css   universal css =&gt; /styles.css\n├─ nuxt.config.js  nuxt website settings\n└─ ...\n</code></pre>\n<h1><a id="API_that_serves_as_CMS_121"></a>API that serves as CMS</h1>\n<p>I have released this CMS in a new repo, please see <a href="https://github.com/c53hzn/april-cms">https://github.com/c53hzn/april-cms</a>.</p>\n<h2><a id="New_way_to_write_Markdown_file_125"></a>New way to write Markdown file</h2>\n<p>Basically it\'s the same as the way you write Markdown files for Jekyll, but I added an attribute called <code>related_blog</code> to show &quot;related blogs&quot; for certain blog articles, you can write the file name without extension.</p>\n<pre class=\'hljs\'><code>---\nlayout: post\ntitle: How to build up a static blog website with Nuxt\ndescription: I built up my website with Nuxt. Basically I just created an API to parse Markdown articles and return JSON contents, and used Nuxt+Axios to call this API to retrieve blog article and generate static pages based on this structure.\ntags: [English,Nuxt,Static Blog]\ncomments: true\nrelated_blog: [nuxt-blog-static-website-en]\n---\n# Header 1\n\nasdf\n\n# Header 2\n\nasdf\n</code></pre>\n<h2><a id="To_read_according_to_parameters_and_return_data_when_the_API_is_called_147"></a>To read according to parameters and return data when the API is called</h2>\n<p>With this API, I transformed Markdown contents into HTML, this will reduce the size of the static website generated.</p>\n<p>For the core codes of API, you can refer to <a href="/blog/editor-for-my-cms-of-my-nuxt-blog-en">Write a control panel for my API-based CMS for Nuxt</a>.</p>\n<h1><a id="Retrieve_data_from_API_and_render_it_to_webpage_153"></a>Retrieve data from API and render it to webpage</h1>\n<p>We can first go to the <code>api</code> folder, then open <code>cmd</code> console under this folder, run command <code>node app.js</code> to open the API, then go to upper folder, open a second <code>cmd</code> console, run command <code>npm run dev</code>, then your Nuxt server is running in <code>dev</code> mode on your computer.</p>\n<p>In this mode, all changes in Nuxt files will be reflected to local server instantly, it is very convenient for constructing websites.</p>\n<p>Because pages like blog article need to be served dynamically, we have to use files starting with underscore like <code>_slug.vue</code> to achieve this. For real page viewing, you can use <code>/blog/nuxt-blog-static-website-en</code> to view contents of this page, and <code>/blog/nuxt-blog-static-website-en</code> is the dynamic parameter <code>slug</code>, you can use this parameter in <code>Axios</code> requests, with format as <code>context.params.slug</code>. Similar methods apply to tag list and tag detail pages.</p>\n<p>To render data, you need to use <code>asyncData</code> method, here is how to render blog list in <code>/blog/index.vue</code> page.</p>\n<p>Remember to <code>import axios from \'axios\'</code> first, then</p>\n<pre class=\'hljs\'><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  <span class="hljs-attr">layout</span>: <span class="hljs-string">"default"</span>,\n  asyncData(context) {\n    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">\'http://127.0.0.1:4000/blogs\'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {\n      <span class="hljs-keyword">return</span> { \n        <span class="hljs-attr">blogs</span>: res.data.blogs,\n        <span class="hljs-attr">baseURL</span>: context.app.router.options.base\n      };\n    })\n  }\n</code></pre>\n<p>And you will use <code>asyncData</code> method to render blog article detail in <code>/blog/_slug.vue</code> too</p>\n<pre class=\'hljs\'><code class="language-javascript">asyncData(context) {\n  <span class="hljs-keyword">const</span> mySlug = context.params.slug;\n  <span class="hljs-keyword">const</span> isDev = context.isDev;\n  <span class="hljs-keyword">var</span> config = {<span class="hljs-string">"isSlugUseDate"</span>:<span class="hljs-literal">true</span>};\n  <span class="hljs-keyword">var</span> result = {\n    <span class="hljs-attr">relatedBlog</span>: [],\n    <span class="hljs-attr">baseURL</span>: context.app.router.options.base,\n  };\n  <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">\'http://127.0.0.1:4000/config\'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{\n    config = res.data;\n    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">\'http://127.0.0.1:4000/blog?slug=\'</span>+mySlug+<span class="hljs-string">"&amp;isdev="</span>+isDev);\n  }).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{\n    result.blog = res.data;\n    result.tags = res.data.tags || [<span class="hljs-string">"none"</span>];\n    result.date = res.data.date;\n    <span class="hljs-keyword">var</span> related = res.data.related_blog;\n    <span class="hljs-keyword">var</span> requests = [];\n    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; related.length; i++) {\n      <span class="hljs-keyword">if</span> (related[i]) {\n        <span class="hljs-keyword">if</span> (!config.isSlugUseDate) {\n          related[i] = related[i].substring(<span class="hljs-number">11</span>,related[i].length);\n          <span class="hljs-keyword">let</span> req = axios.get(<span class="hljs-string">\'http://127.0.0.1:4000/blog?slug=\'</span>+related[i])\n          .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<span class="hljs-comment">// res.data is json</span>\n            <span class="hljs-keyword">let</span> temp = res.data;\n            <span class="hljs-keyword">if</span> (temp) {\n              <span class="hljs-keyword">delete</span> res.data.content;\n              <span class="hljs-keyword">return</span> res.data;\n            } <span class="hljs-keyword">else</span> {\n              <span class="hljs-keyword">return</span> {};\n            }\n          });\n          requests.push(req);\n        }\n      }\n    }\n    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(requests);\n  }).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{\n    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; res.length; i++) {\n      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">JSON</span>.stringify(res[i])!=<span class="hljs-string">"{}"</span>) {\n        result.relatedBlog.push(res[i]);\n      }\n    }\n    <span class="hljs-keyword">return</span> result;\n  });\n}\n</code></pre>\n<p>Similar methods apply to tag list and tag detail pages.</p>\n<h1><a id="Generate_static_website_230"></a>Generate static website</h1>\n<p>The command for generating static pages is <code>npm run generate</code>, and please remember to leave the API open for the entire generation process, or Nuxt will not be able to retrieve data.</p>\n<p>But Nuxt will only generate static files for those <code>.vue</code> files not starting with underscore under <code>pages</code> folder. It is to say that Nuxt will not generate static files for dynamic pages like <code>_slug.vue</code> and <code>_tag.vue</code>. If you wish to generate static pages for them, please set the right <code>routes</code> in file <code>nuxt.config.js</code>.</p>\n<p>Also Nuxt will generate folder for each <code>.vue</code> file, and generate <code>index.html</code> under this folder by default, so this article will be able to be viewed with <code>/blog/nuxt-blog-static-website-en/</code> and also <code>/blog/nuxt-blog-static-website-en/index.html</code>, but think of the amount of folders, let\'s just set it to <code>false</code>.</p>\n<p>Here is my setting for <code>generate</code> in file <code>nuxt.config.js</code>.</p>\n<pre class=\'hljs\'><code class="language-javascript">generate: {\n  <span class="hljs-attr">subFolders</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//if true, each page or post will have their own folder</span>\n  routes: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{\n    <span class="hljs-keyword">let</span> blogs = axios.get(<span class="hljs-string">\'http://127.0.0.1:4000\'</span>)\n    .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<span class="hljs-comment">// res.data is array</span>\n      <span class="hljs-keyword">return</span> res.data.blogs.map(<span class="hljs-function">(<span class="hljs-params">blog</span>) =&gt;</span> {\n        <span class="hljs-keyword">return</span> {\n          <span class="hljs-attr">route</span>: <span class="hljs-string">\'/blog/\'</span> + blog.slug,\n          <span class="hljs-attr">payload</span>: blog\n        }\n      })\n    })\n    <span class="hljs-keyword">let</span> tags = axios.get(<span class="hljs-string">\'http://127.0.0.1:4000?tag=all_tags\'</span>)\n    .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<span class="hljs-comment">// res.data is object</span>\n      <span class="hljs-keyword">let</span> tags = <span class="hljs-built_in">Object</span>.keys(res.data.tags);\n      <span class="hljs-keyword">return</span> tags.map(<span class="hljs-function">(<span class="hljs-params">tag</span>) =&gt;</span> {\n        <span class="hljs-keyword">return</span> {\n          <span class="hljs-attr">route</span>: <span class="hljs-string">\'/blog/tag/\'</span> + tag,\n          <span class="hljs-attr">payload</span>: tag\n        };\n      });\n    })\n    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([blogs, tags]).then(<span class="hljs-function"><span class="hljs-params">values</span> =&gt;</span> {\n      <span class="hljs-keyword">return</span> [...values[<span class="hljs-number">0</span>], ...values[<span class="hljs-number">1</span>]]\n    })\n  },\n  ...\n}\n</code></pre>\n<h1><a id="Some_other_points_to_notice_271"></a>Some other points to notice</h1>\n<h2><a id="Routes_and_links_273"></a>Routes and links</h2>\n<p>The internal links within website like navigation links should be using <code>&lt;nuxt-link/&gt;</code> tag, it\'s favorable to access speed because of Nuxt\'s routing system.</p>\n<p>But when served on static server, the page will still send HTTP request to <code>127.0.0.1:4000</code> and return &quot;Network error&quot; when request failed, because the API is closed now.</p>\n<p>It seems difficult to solve this issue if I am to keep those <code>&lt;nuxt-link/&gt;</code> tags and have the pages render right contents for static mode, so I changed all <code>&lt;nuxt-link/&gt;</code> tags to <code>&lt;a&gt;&lt;/a&gt;</code> tags, then the static website is functioning well now.</p>\n<h2><a id="Root_path_281"></a>Root path</h2>\n<p>If your website is not in the root path of your server, but is rather like <code>xxx.github.io/myproject</code>, and if you are using relative links in your website, those links might be pointing to wrong paths. You might need to set your base folder name in <code>nuxt.config.js</code> like this</p>\n<pre class=\'hljs\'><code class="language-javascript">router: {\n  <span class="hljs-attr">base</span>: <span class="hljs-regexp">/myproject/</span>\n}\n</code></pre>\n<p>Then the links should be right links no matter your website is dynamic or static.</p>\n<h1><a id="Experience_from_this_293"></a>Experience from this</h1>\n<p>I spent about 2 weeks to give my blog site a new look, and discovered amazing contents on Youtube during this process. You really can find any tutorial video on Youtube.</p>\n<p>And the auto-generated subtitles by Youtube are very useful and also pretty accurate. Youtube can recognize all kinds of accent from all over the world, although the subtitles and speakers\' words are not 100% match, I can still understand most part of the videos.</p>\n<p>Recently(2020-04-05) I have been making tutorial videos for my company and upload them to Youtube, and Youtube subtitles can recognize around 99% of my narration, I\'m really impressed.</p>\n<p>Youtube deserves a thumb up here!</p>\n',prev:"tv-drama-die-now",next:"script-for-photoshop-bulk-resize-and-watermark"},tags:n,date:i}],fetch:[],error:null,state:{lang:{val:"Chi",ui:o,title:"Change navigation to English"}},serverRendered:!0,routePath:"/blog/nuxt-blog-static-website-en"}}("post","JavaScript","Nuxt","nuxt-blog-static-website",Array(5),"English","2020-04-05")</script><script src="/_nuxt/701d42540a3278d1c670.js" defer></script><script src="/_nuxt/609b5e2e1685436671e4.js" defer></script><script src="/_nuxt/0432c1a2dd8b48d52e80.js" defer></script><script src="/_nuxt/93ea4c7e1b994d5e57f3.js" defer></script>
  </body>
</html>
